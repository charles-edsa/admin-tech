<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Delivery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Barra de Menu Superior -->
    <nav class="bg-white border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-8">
            <div class="flex justify-between items-center h-14 md:h-16">
                <h1 class="text-gray-800 text-lg md:text-xl font-semibold">
                    <i class="fas fa-store text-orange-500 mr-1 md:mr-2"></i>
                    <span class="hidden sm:inline">Painel Admin</span>
                    <span class="sm:hidden">Admin</span>
                </h1>
                
                <!-- Mobile Menu Button -->
                <button onclick="toggleMobileMenu()" class="md:hidden p-2 text-gray-600">
                    <i class="fas fa-bars text-lg"></i>
                </button>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:block">
                    <nav class="flex space-x-8">
                        <button onclick="switchTab('pedidos')" id="tab-pedidos" class="tab-button text-orange-600 py-2 px-1 text-sm font-medium flex items-center border-b-2 border-orange-500">
                            <i class="fas fa-clipboard-list mr-2"></i>Pedidos
                        </button>
                        <button onclick="switchTab('salao')" id="tab-salao" class="tab-button text-gray-500 hover:text-gray-700 py-2 px-1 text-sm font-medium flex items-center border-b-2 border-transparent hover:border-gray-300">
                            <i class="fas fa-utensils mr-2"></i>Salão
                        </button>
                        <button onclick="switchTab('kds')" id="tab-kds" class="tab-button text-gray-500 hover:text-gray-700 py-2 px-1 text-sm font-medium flex items-center border-b-2 border-transparent hover:border-gray-300">
                            <i class="fas fa-tv mr-2"></i>KDS
                        </button>
                        <button onclick="switchTab('entregas')" id="tab-entregas" class="tab-button text-gray-500 hover:text-gray-700 py-2 px-1 text-sm font-medium flex items-center border-b-2 border-transparent hover:border-gray-300">
                            <i class="fas fa-truck mr-2"></i>Entregas
                        </button>
                    </nav>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <div id="mobile-menu" class="md:hidden hidden bg-white border-t border-gray-200 py-2">
                <div class="grid grid-cols-2 gap-2 px-2">
                    <button onclick="switchTab('pedidos'); toggleMobileMenu();" id="mobile-tab-pedidos" class="mobile-tab-button bg-orange-100 text-orange-700 p-3 rounded-lg text-sm font-medium flex flex-col items-center">
                        <i class="fas fa-clipboard-list text-lg mb-1"></i>
                        <span>Pedidos</span>
                    </button>
                    <button onclick="switchTab('salao'); toggleMobileMenu();" id="mobile-tab-salao" class="mobile-tab-button bg-gray-100 text-gray-600 p-3 rounded-lg text-sm font-medium flex flex-col items-center">
                        <i class="fas fa-utensils text-lg mb-1"></i>
                        <span>Salão</span>
                    </button>
                    <button onclick="switchTab('kds'); toggleMobileMenu();" id="mobile-tab-kds" class="mobile-tab-button bg-gray-100 text-gray-600 p-3 rounded-lg text-sm font-medium flex flex-col items-center">
                        <i class="fas fa-tv text-lg mb-1"></i>
                        <span>KDS</span>
                    </button>
                    <button onclick="switchTab('entregas'); toggleMobileMenu();" id="mobile-tab-entregas" class="mobile-tab-button bg-gray-100 text-gray-600 p-3 rounded-lg text-sm font-medium flex flex-col items-center">
                        <i class="fas fa-truck text-lg mb-1"></i>
                        <span>Entregas</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Conteúdo Principal -->
    <div class="max-w-7xl mx-auto py-3 px-2 sm:py-6 sm:px-6 lg:px-8">

        <!-- Aba Pedidos -->
        <div id="content-pedidos" class="tab-content">
            <!-- Mobile Layout -->
            <div class="block md:hidden space-y-4">
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="bg-amber-50 border-b border-amber-200 px-3 py-3">
                        <div class="flex items-center justify-between">
                            <h3 class="text-sm font-semibold text-amber-700 uppercase tracking-wide">
                                <i class="fas fa-clock text-amber-500 mr-1"></i>Aguardando
                            </h3>
                            <span id="contador-aguardando-mobile" class="bg-amber-100 text-amber-700 text-xs font-medium px-2 py-1 rounded">0</span>
                        </div>
                    </div>
                    <div id="coluna-aguardando-mobile" class="p-3">
                        <div class="text-center py-6 text-gray-400">
                            <i class="fas fa-clock text-xl mb-2"></i>
                            <p class="text-sm">Nenhum pedido aguardando</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="bg-green-50 border-b border-green-200 px-3 py-3">
                        <div class="flex items-center justify-between">
                            <h3 class="text-sm font-semibold text-green-700 uppercase tracking-wide">
                                <i class="fas fa-check-circle text-green-500 mr-1"></i>Prontos
                            </h3>
                            <span id="contador-prontos-mobile" class="bg-green-100 text-green-700 text-xs font-medium px-2 py-1 rounded">0</span>
                        </div>
                    </div>
                    <div id="coluna-prontos-mobile" class="p-3">
                        <div class="text-center py-6 text-gray-400">
                            <i class="fas fa-check-circle text-xl mb-2"></i>
                            <p class="text-sm">Nenhum pedido pronto</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Desktop Layout -->
            <div class="hidden md:block">
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="grid grid-cols-2 bg-gray-50 border-b border-gray-200">
                        <div class="px-6 py-4 border-r border-gray-200">
                            <div class="flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-clock text-amber-500 mr-2"></i>Aguardando
                                </h3>
                                <span id="contador-aguardando" class="bg-amber-100 text-amber-700 text-xs font-medium px-2 py-1 rounded">0</span>
                            </div>
                        </div>
                        <div class="px-6 py-4">
                            <div class="flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-check-circle text-green-500 mr-2"></i>Prontos
                                </h3>
                                <span id="contador-prontos" class="bg-green-100 text-green-700 text-xs font-medium px-2 py-1 rounded">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 min-h-96">
                        <div id="coluna-aguardando" class="border-r border-gray-200 bg-white">
                            <div class="p-6 text-center text-gray-400">
                                <i class="fas fa-clock text-2xl mb-2"></i>
                                <p class="text-sm">Nenhum pedido aguardando</p>
                            </div>
                        </div>
                        <div id="coluna-prontos" class="bg-white">
                            <div class="p-6 text-center text-gray-400">
                                <i class="fas fa-check-circle text-2xl mb-2"></i>
                                <p class="text-sm">Nenhum pedido pronto</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Aba Salão -->
        <div id="content-salao" class="tab-content hidden">
            <!-- Cabeçalho com botão de alternância -->
            <div class="flex justify-end items-center mb-6">
                <!-- Botão de alternância -->
                <div class="bg-white border border-gray-200 rounded-lg p-1 shadow-sm">
                    <button onclick="alternarVisualizacao('mesas')" id="btn-mesas" class="px-4 py-2 text-sm font-medium rounded-md bg-orange-100 text-orange-700 transition-colors">
                        <i class="fas fa-th-large mr-2"></i>Mesas
                    </button>
                    <button onclick="alternarVisualizacao('comandas')" id="btn-comandas" class="px-4 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-gray-800 transition-colors">
                        <i class="fas fa-receipt mr-2"></i>Comandas
                    </button>
                </div>
            </div>

            <!-- Visualização de Mesas -->
            <div id="view-mesas" class="salao-view">
                <div class="bg-white rounded-lg border border-gray-200 shadow-sm p-6">
                    
                    <!-- Grade de Mesas -->
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4" id="grade-mesas">
                        <!-- Mesas serão renderizadas aqui -->
                    </div>
                </div>
            </div>

            <!-- Visualização de Comandas -->
            <div id="view-comandas" class="salao-view hidden">
                <div class="bg-white rounded-lg border border-gray-200 shadow-sm">
                    
                    <!-- Lista de Comandas -->
                    <div id="lista-comandas" class="divide-y divide-gray-200">
                        <!-- Comandas serão renderizadas aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Aba KDS -->
        <div id="content-kds" class="tab-content hidden">
            <!-- Mobile Layout -->
            <div class="block md:hidden space-y-4">
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="bg-orange-50 border-b border-orange-200 px-3 py-3">
                        <div class="flex items-center justify-between">
                            <h3 class="text-sm font-semibold text-orange-700 uppercase tracking-wide">
                                <i class="fas fa-bell text-orange-500 mr-1"></i>Novos Pedidos
                            </h3>
                            <span id="contador-novos-mobile" class="bg-orange-100 text-orange-700 text-xs font-medium px-2 py-1 rounded">0</span>
                        </div>
                    </div>
                    <div id="coluna-novos-mobile" class="p-3">
                        <div class="text-center py-6 text-gray-400">
                            <i class="fas fa-bell text-xl mb-2"></i>
                            <p class="text-sm">Nenhum pedido novo</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="bg-blue-50 border-b border-blue-200 px-3 py-3">
                        <div class="flex items-center justify-between">
                            <h3 class="text-sm font-semibold text-blue-700 uppercase tracking-wide">
                                <i class="fas fa-utensils text-blue-500 mr-1"></i>Em Preparação
                            </h3>
                            <span id="contador-preparo-mobile" class="bg-blue-100 text-blue-700 text-xs font-medium px-2 py-1 rounded">0</span>
                        </div>
                    </div>
                    <div id="coluna-preparo-mobile" class="p-3">
                        <div class="text-center py-6 text-gray-400">
                            <i class="fas fa-utensils text-xl mb-2"></i>
                            <p class="text-sm">Nenhum pedido em preparo</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Desktop Layout -->
            <div class="hidden md:block">
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="grid grid-cols-2 bg-gray-50 border-b border-gray-200">
                        <div class="px-6 py-4 border-r border-gray-200">
                            <div class="flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-bell text-orange-500 mr-2"></i>Novos Pedidos
                                </h3>
                                <span id="contador-novos" class="bg-orange-100 text-orange-700 text-xs font-medium px-2 py-1 rounded">0</span>
                            </div>
                        </div>
                        <div class="px-6 py-4">
                            <div class="flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-utensils text-blue-500 mr-2"></i>Em Preparação
                                </h3>
                                <span id="contador-preparo" class="bg-blue-100 text-blue-700 text-xs font-medium px-2 py-1 rounded">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 min-h-96">
                        <div id="coluna-novos" class="border-r border-gray-200 bg-white">
                            <div class="p-6 text-center text-gray-400">
                                <i class="fas fa-bell text-2xl mb-2"></i>
                                <p class="text-sm">Nenhum pedido novo</p>
                            </div>
                        </div>
                        <div id="coluna-preparo" class="bg-white">
                            <div class="p-6 text-center text-gray-400">
                                <i class="fas fa-utensils text-2xl mb-2"></i>
                                <p class="text-sm">Nenhum pedido em preparo</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Aba Entregas -->
        <div id="content-entregas" class="tab-content hidden">
            <!-- Mobile Layout -->
            <div class="block md:hidden space-y-4">
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="bg-amber-50 border-b border-amber-200 px-3 py-3">
                        <div class="flex items-center justify-between">
                            <h3 class="text-sm font-semibold text-amber-700 uppercase tracking-wide">
                                <i class="fas fa-clock text-amber-500 mr-1"></i>Pendentes
                            </h3>
                            <span id="contador-pendentes-mobile" class="bg-amber-100 text-amber-700 text-xs font-medium px-2 py-1 rounded">0</span>
                        </div>
                    </div>
                    <div id="coluna-pendentes-mobile" class="p-3">
                        <div class="text-center py-6 text-gray-400">
                            <i class="fas fa-clock text-xl mb-2"></i>
                            <p class="text-sm">Nenhuma entrega pendente</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="bg-blue-50 border-b border-blue-200 px-3 py-3">
                        <div class="flex items-center justify-between">
                            <h3 class="text-sm font-semibold text-blue-700 uppercase tracking-wide">
                                <i class="fas fa-truck text-blue-500 mr-1"></i>Em Rota
                            </h3>
                            <span id="contador-rota-mobile" class="bg-blue-100 text-blue-700 text-xs font-medium px-2 py-1 rounded">0</span>
                        </div>
                    </div>
                    <div id="coluna-rota-mobile" class="p-3">
                        <div class="text-center py-6 text-gray-400">
                            <i class="fas fa-truck text-xl mb-2"></i>
                            <p class="text-sm">Nenhuma entrega em rota</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Desktop Layout -->
            <div class="hidden md:block">
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="grid grid-cols-2 bg-gray-50 border-b border-gray-200">
                        <div class="px-6 py-4 border-r border-gray-200">
                            <div class="flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-clock text-amber-500 mr-2"></i>Pendentes
                                </h3>
                                <span id="contador-pendentes" class="bg-amber-100 text-amber-700 text-xs font-medium px-2 py-1 rounded">0</span>
                            </div>
                        </div>
                        <div class="px-6 py-4">
                            <div class="flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-truck text-blue-500 mr-2"></i>Em Rota
                                </h3>
                                <span id="contador-rota" class="bg-blue-100 text-blue-700 text-xs font-medium px-2 py-1 rounded">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 min-h-96">
                        <div id="coluna-pendentes" class="border-r border-gray-200 bg-white">
                            <div class="p-6 text-center text-gray-400">
                                <i class="fas fa-clock text-2xl mb-2"></i>
                                <p class="text-sm">Nenhuma entrega pendente</p>
                            </div>
                        </div>
                        <div id="coluna-rota" class="bg-white">
                            <div class="p-6 text-center text-gray-400">
                                <i class="fas fa-truck text-2xl mb-2"></i>
                                <p class="text-sm">Nenhuma entrega em rota</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <script>


        // Sistema de dados do salão
        
        let salaoData = {
            mesas: [
                { 
                    id: 1, 
                    capacidade: 2, 
                    status: 'livre', 
                    cliente: null, 
                    horario: null, 
                    total: 0, 
                    pessoas: 0,
                    taxaServico: false,
                    pedidos: [],
                    pagamentos: []
                },
                { 
                    id: 2, 
                    capacidade: 4, 
                    status: 'ocupada', 
                    cliente: 'Família Silva', 
                    horario: '14:30', 
                    total: 85.50, 
                    pessoas: 4,
                    taxaServico: true,
                    pedidos: [
                        { id: 'P001', itens: ['Pizza Margherita', 'Refrigerante 2L'], valor: 65.50, status: 'entregue', horario: '14:35' },
                        { id: 'P002', itens: ['Sobremesa'], valor: 20.00, status: 'entregue', horario: '15:10' }
                    ],
                    pagamentos: []
                },
                { 
                    id: 3, 
                    capacidade: 2, 
                    status: 'livre', 
                    cliente: null, 
                    horario: null, 
                    total: 0, 
                    pessoas: 0,
                    taxaServico: false,
                    pedidos: [],
                    pagamentos: []
                },
                { 
                    id: 4, 
                    capacidade: 6, 
                    status: 'reservada', 
                    cliente: 'João Santos', 
                    horario: '15:00', 
                    total: 0, 
                    pessoas: 6,
                    taxaServico: false,
                    pedidos: [],
                    pagamentos: []
                },
                { 
                    id: 5, 
                    capacidade: 4, 
                    status: 'ocupada', 
                    cliente: 'Casal Oliveira', 
                    horario: '14:15', 
                    total: 42.90, 
                    pessoas: 2,
                    taxaServico: true,
                    pedidos: [
                        { id: 'P003', itens: ['Hambúrguer Duplo', 'Batata Frita', 'Refrigerante'], valor: 42.90, status: 'entregue', horario: '14:25' }
                    ],
                    pagamentos: []
                },
                { 
                    id: 6, 
                    capacidade: 2, 
                    status: 'livre', 
                    cliente: null, 
                    horario: null, 
                    total: 0, 
                    pessoas: 0,
                    taxaServico: false,
                    pedidos: [],
                    pagamentos: []
                },
                { 
                    id: 7, 
                    capacidade: 8, 
                    status: 'livre', 
                    cliente: null, 
                    horario: null, 
                    total: 0, 
                    pessoas: 0,
                    taxaServico: false,
                    pedidos: [],
                    pagamentos: []
                },
                { 
                    id: 8, 
                    capacidade: 4, 
                    status: 'livre', 
                    cliente: null, 
                    horario: null, 
                    total: 0, 
                    pessoas: 0,
                    taxaServico: false,
                    pedidos: [],
                    pagamentos: []
                },
                { 
                    id: 9, 
                    capacidade: 2, 
                    status: 'ocupada', 
                    cliente: 'Maria Costa', 
                    horario: '14:45', 
                    total: 28.50, 
                    pessoas: 1,
                    taxaServico: false,
                    pedidos: [
                        { id: 'P004', itens: ['Salada Caesar', 'Suco Natural'], valor: 28.50, status: 'entregue', horario: '14:50' }
                    ],
                    pagamentos: []
                },
                { 
                    id: 10, 
                    capacidade: 4, 
                    status: 'livre', 
                    cliente: null, 
                    horario: null, 
                    total: 0, 
                    pessoas: 0,
                    taxaServico: false,
                    pedidos: [],
                    pagamentos: []
                },
                { 
                    id: 11, 
                    capacidade: 2, 
                    status: 'livre', 
                    cliente: null, 
                    horario: null, 
                    total: 0, 
                    pessoas: 0,
                    taxaServico: false,
                    pedidos: [],
                    pagamentos: []
                },
                { 
                    id: 12, 
                    capacidade: 6, 
                    status: 'livre', 
                    cliente: null, 
                    horario: null, 
                    total: 0, 
                    pessoas: 0,
                    taxaServico: false,
                    pedidos: [],
                    pagamentos: []
                }
            ],
            comandas: [
                { id: 'C001', status: 'ativa' },
                { id: 'C002', status: 'ativa' },
                { id: 'C003', status: 'finalizada' }
            ]
        };

        // Sistema de entregadores
        let entregadoresData = {
            disponiveis: [
                { id: 1, nome: 'Carlos Moto', veiculo: 'Moto', status: 'disponivel', entregas: 0 },
                { id: 2, nome: 'João Bike', veiculo: 'Bicicleta', status: 'disponivel', entregas: 1 },
                { id: 3, nome: 'Ana Delivery', veiculo: 'Carro', status: 'ocupado', entregas: 2 },
                { id: 4, nome: 'Pedro Express', veiculo: 'Moto', status: 'disponivel', entregas: 0 },
                { id: 5, nome: 'Maria Fast', veiculo: 'Bicicleta', status: 'disponivel', entregas: 1 }
            ]
        };

        // Sistema de dados dos pedidos
        let pedidosData = {
            aguardando: [
                {
                    id: 'D001',
                    cliente: 'João Silva',
                    telefone: '5511999991234',
                    telefoneFormatado: '(11) 99999-1234',
                    total: 45.90,
                    formaPagamento: 'Pix',
                    statusPagamento: 'Pago',
                    itens: [
                        { nome: 'Hambúrguer Artesanal', quantidade: 2, observacoes: ['Pão brioche', 'Carne 180g', 'Sem cebola'] },
                        { nome: 'Batata Frita', quantidade: 1, observacoes: ['Tamanho grande', 'Com bacon'] },
                        { nome: 'Refrigerante', quantidade: 2, observacoes: ['Coca-Cola 350ml'] }
                    ],
                    tempo: '2min',
                    hora: '14:30',
                    tipo: 'delivery',
                    endereco: 'Rua das Flores, 123 - Centro',
                    distancia: '1.2 km'
                },
                {
                    id: 'D002',
                    cliente: 'Maria Santos',
                    telefone: '5511988885678',
                    telefoneFormatado: '(11) 98888-5678',
                    total: 32.50,
                    formaPagamento: 'Online',
                    statusPagamento: 'Pendente',
                    itens: [
                        { nome: 'Pizza Margherita', quantidade: 1, observacoes: ['Tamanho médio', 'Borda recheada'] },
                        { nome: 'Refrigerante', quantidade: 1, observacoes: ['Guaraná 350ml'] }
                    ],
                    tempo: '5min',
                    hora: '14:25',
                    tipo: 'delivery',
                    endereco: 'Av. Brasil, 456 - Vila Nova',
                    distancia: '2.1 km'
                }
            ],
            prontos: [
                {
                    id: 'D005',
                    cliente: 'Carlos Lima',
                    telefone: '5511955557890',
                    telefoneFormatado: '(11) 95555-7890',
                    total: 28.90,
                    formaPagamento: 'Dinheiro',
                    statusPagamento: 'Pendente',
                    itens: [
                        { nome: 'Sanduíche Natural', quantidade: 1, observacoes: ['Pão integral', 'Frango desfiado', 'Sem maionese'] },
                        { nome: 'Suco de Laranja', quantidade: 1, observacoes: ['300ml', 'Sem açúcar'] }
                    ],
                    tempo: '3min',
                    hora: '14:10',
                    tipo: 'delivery',
                    endereco: 'Rua Augusta, 789 - Consolação',
                    distancia: '0.8 km'
                }
            ],
            novos: [
                {
                    id: 'D003',
                    cliente: 'Ana Costa',
                    telefone: '5511977779012',
                    telefoneFormatado: '(11) 97777-9012',
                    total: 38.50,
                    formaPagamento: 'Maquininha',
                    statusPagamento: 'Pago',
                    itens: [
                        { nome: 'Pizza Calabresa', quantidade: 1, observacoes: ['Tamanho médio', 'Extra queijo', 'Cebola roxa'] },
                        { nome: 'Refrigerante', quantidade: 1, observacoes: ['Pepsi 350ml'] }
                    ],
                    tempo: '1min',
                    hora: '14:32',
                    tipo: 'delivery',
                    endereco: 'Rua Oscar Freire, 321 - Jardins',
                    distancia: '3.5 km'
                }
            ],
            preparo: [
                {
                    id: 'D004',
                    cliente: 'Pedro Oliveira',
                    telefone: '5511966663456',
                    telefoneFormatado: '(11) 96666-3456',
                    total: 52.00,
                    formaPagamento: 'Pix',
                    statusPagamento: 'Pago',
                    itens: [
                        { nome: 'Hambúrguer Gourmet', quantidade: 2, observacoes: ['Carne angus 200g', 'Queijo brie', 'Rúcula'] },
                        { nome: 'Onion Rings', quantidade: 1, observacoes: ['Porção grande', 'Molho barbecue'] },
                        { nome: 'Refrigerante', quantidade: 2, observacoes: ['Coca-Cola 350ml'] }
                    ],
                    tempo: '15min',
                    hora: '14:15',
                    tipo: 'delivery',
                    endereco: 'Rua da Consolação, 500 - Centro',
                    distancia: '1.8 km'
                }
            ],
            pendentes: [
                {
                    id: 'D006',
                    cliente: 'Fernanda Costa',
                    telefone: '5511944445555',
                    telefoneFormatado: '(11) 94444-5555',
                    total: 35.90,
                    formaPagamento: 'Online',
                    statusPagamento: 'Pago',
                    itens: [
                        { nome: 'Pizza Margherita', quantidade: 1, observacoes: ['Tamanho médio', 'Massa fina'] },
                        { nome: 'Refrigerante', quantidade: 1, observacoes: ['Sprite 350ml'] }
                    ],
                    endereco: 'Rua das Palmeiras, 456 - Vila Madalena',
                    distancia: '1.5 km',
                    entregador: 'Carlos Moto',
                    tempoDesignacao: '14:05',
                    status: 'pendente',
                    hora: '13:50'
                }
            ],
            rota: [
                {
                    id: 'D007',
                    cliente: 'Roberto Santos',
                    telefone: '5511911112222',
                    telefoneFormatado: '(11) 91111-2222',
                    total: 42.50,
                    formaPagamento: 'Dinheiro',
                    statusPagamento: 'Pendente',
                    itens: [
                        { nome: 'Pizza Calabresa', quantidade: 1, observacoes: ['Tamanho grande', 'Borda catupiry', 'Azeitona'] },
                        { nome: 'Refrigerante', quantidade: 1, observacoes: ['Fanta 350ml'] }
                    ],
                    endereco: 'Av. Paulista, 1000 - Bela Vista',
                    distancia: '2.1 km',
                    entregador: 'João Bike',
                    tempoSaida: '13:45',
                    previsaoEntrega: '14:15',
                    status: 'saindo',
                    hora: '13:30'
                },
                {
                    id: 'D008',
                    cliente: 'Lucia Pereira',
                    telefone: '5511922223333',
                    telefoneFormatado: '(11) 92222-3333',
                    total: 29.90,
                    formaPagamento: 'Maquininha',
                    statusPagamento: 'Pago',
                    itens: [
                        { nome: 'Hambúrguer Simples', quantidade: 2, observacoes: ['Pão tradicional', 'Carne 120g'] },
                        { nome: 'Batata Frita', quantidade: 1, observacoes: ['Tamanho médio'] }
                    ],
                    endereco: 'Rua dos Jardins, 789 - Centro',
                    distancia: '1.3 km',
                    entregador: 'Ana Delivery',
                    tempoSaida: '13:40',
                    previsaoEntrega: '14:10',
                    status: 'entregando',
                    hora: '13:25'
                }
            ]
        };

        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        }

        function switchTab(tabName) {
            // Remover classes ativas
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('border-orange-500', 'text-orange-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            document.querySelectorAll('.mobile-tab-button').forEach(btn => {
                btn.classList.remove('bg-orange-100', 'text-orange-700');
                btn.classList.add('bg-gray-100', 'text-gray-600');
            });
            
            // Esconder conteúdos
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Ativar aba selecionada
            const activeTab = document.getElementById(`tab-${tabName}`);
            if (activeTab) {
                activeTab.classList.add('border-orange-500', 'text-orange-600');
                activeTab.classList.remove('border-transparent', 'text-gray-500');
            }
            
            const activeMobileTab = document.getElementById(`mobile-tab-${tabName}`);
            if (activeMobileTab) {
                activeMobileTab.classList.add('bg-orange-100', 'text-orange-700');
                activeMobileTab.classList.remove('bg-gray-100', 'text-gray-600');
            }
            
            // Mostrar conteúdo
            document.getElementById(`content-${tabName}`).classList.remove('hidden');
            
            // Atualizar dados da aba
            atualizarAba(tabName);
            

        }

        function atualizarContadores() {
            // Pedidos
            document.getElementById('contador-aguardando').textContent = pedidosData.aguardando.length;
            document.getElementById('contador-prontos').textContent = pedidosData.prontos.length;
            document.getElementById('contador-aguardando-mobile').textContent = pedidosData.aguardando.length;
            document.getElementById('contador-prontos-mobile').textContent = pedidosData.prontos.length;

            // KDS
            document.getElementById('contador-novos').textContent = pedidosData.novos.length;
            document.getElementById('contador-preparo').textContent = pedidosData.preparo.length;
            document.getElementById('contador-novos-mobile').textContent = pedidosData.novos.length;
            document.getElementById('contador-preparo-mobile').textContent = pedidosData.preparo.length;

            // Entregas
            document.getElementById('contador-pendentes').textContent = pedidosData.pendentes.length;
            document.getElementById('contador-rota').textContent = pedidosData.rota.length;
            document.getElementById('contador-pendentes-mobile').textContent = pedidosData.pendentes.length;
            document.getElementById('contador-rota-mobile').textContent = pedidosData.rota.length;
        }

        function renderizarPedidos(pedidos, containerId, tipo) {
            const container = document.getElementById(containerId);
            if (!container) return;

            if (pedidos.length === 0) {
                const emptyMessages = {
                    'aguardando': 'Nenhum pedido aguardando',
                    'prontos': 'Nenhum pedido pronto',
                    'novos': 'Nenhum pedido novo',
                    'preparo': 'Nenhum pedido em preparo',
                    'pendentes': 'Nenhuma entrega pendente',
                    'rota': 'Nenhuma entrega em rota'
                };
                
                const icons = {
                    'aguardando': 'clock',
                    'prontos': 'check-circle',
                    'novos': 'bell',
                    'preparo': 'utensils',
                    'pendentes': 'clock',
                    'rota': 'truck'
                };

                container.innerHTML = `
                    <div class="p-6 text-center text-gray-400">
                        <i class="fas fa-${icons[tipo]} text-2xl mb-2"></i>
                        <p class="text-sm">${emptyMessages[tipo]}</p>
                    </div>
                `;
                return;
            }

            const pedidosHTML = pedidos.map((pedido, index) => {
                const buttonConfig = {
                    'aguardando': { text: 'Aceitar', action: 'aceitarPedido', color: 'blue' },
                    'prontos': { text: 'Despachar', action: 'despacharPedido', color: 'green' },
                    'novos': { text: 'Preparar', action: 'prepararPedido', color: 'blue' },
                    'preparo': { text: 'Finalizar', action: 'finalizarPedido', color: 'green' },
                    'pendentes': { text: 'Coletar', action: 'coletarPedido', color: 'blue' },
                    'rota': { text: 'Confirmar', action: 'confirmarEntrega', color: 'green' }
                };

                const config = buttonConfig[tipo];
                
                return `
                    <div class="px-4 py-4 ${index > 0 ? 'border-t border-gray-200' : ''}">
                        <div class="bg-white hover:bg-gray-50 transition-colors cursor-pointer rounded-lg p-4 border border-gray-100">
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm font-semibold text-gray-900">#${pedido.id}</span>
                                    <span class="text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700">
                                        <i class="fas fa-motorcycle mr-1"></i>Delivery
                                    </span>
                                </div>
                                
                                <!-- 1. Dados do Cliente -->
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Cliente:</span>
                                        <span class="text-sm font-medium text-gray-900">${pedido.cliente}</span>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Telefone:</span>
                                        <a href="https://wa.me/${pedido.telefone}" target="_blank" class="text-sm text-blue-600 hover:text-blue-800 hover:underline flex items-center">
                                            <i class="fab fa-whatsapp mr-1"></i>${pedido.telefoneFormatado}
                                        </a>
                                    </div>
                                </div>
                                
                                <!-- 2. Detalhes do Pedido -->
                                <div class="border-t border-gray-200 pt-3">
                                    <div class="space-y-2">
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-gray-600">Itens:</span>
                                            <span class="text-sm font-medium text-gray-900">${pedido.itens.reduce((total, item) => total + item.quantidade, 0)}</span>
                                        </div>
                                        
                                        <div class="space-y-2">
                                            ${pedido.itens.map(item => `
                                                <div class="text-sm text-gray-900">
                                                    <div class="font-medium">${item.quantidade}x ${item.nome}</div>
                                                    ${item.observacoes && item.observacoes.length > 0 ? `
                                                        <div class="text-xs text-gray-600 ml-2 mt-1">(${item.observacoes.join(', ')})</div>
                                                    ` : ''}
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 3. Endereço e Horário -->
                                <div class="border-t border-gray-200 pt-3 space-y-2">
                                    ${pedido.endereco ? `
                                        <div class="flex items-start justify-between">
                                            <span class="text-sm text-gray-600">Endereço:</span>
                                            <div class="text-right">
                                                <a href="https://maps.google.com/?q=${encodeURIComponent(pedido.endereco)}" target="_blank" class="text-sm text-blue-600 hover:text-blue-800 hover:underline flex items-center">
                                                    <i class="fas fa-map-marker-alt mr-1"></i>${pedido.endereco} • ${pedido.distancia}
                                                </a>
                                            </div>
                                        </div>
                                    ` : ''}
                                    
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Horário:</span>
                                        <div class="text-right">
                                            <div class="text-sm text-gray-700">${pedido.hora}${pedido.tempo ? ` • ${pedido.tempo}` : ''}</div>
                                        </div>
                                    </div>
                                    
                                    ${pedido.entregador ? `
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-gray-600">Entregador:</span>
                                            <span class="text-sm font-medium text-gray-900">${pedido.entregador}</span>
                                        </div>
                                    ` : ''}
                                </div>
                                
                                <!-- 4. Rodapé com Total e Botão -->
                                <div class="border-t border-gray-200 pt-3 space-y-3">
                                    <div class="space-y-2">
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-gray-600">Forma de Pagamento:</span>
                                            <span class="text-sm font-medium text-gray-900">${pedido.formaPagamento}</span>
                                        </div>
                                        
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-gray-600">Status do Pagamento:</span>
                                            <span class="text-sm font-medium ${pedido.statusPagamento === 'Pago' ? 'text-green-600' : 'text-amber-600'}">${pedido.statusPagamento}</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-between items-center">
                                        <span class="text-lg font-bold text-gray-900">R$ ${pedido.total.toFixed(2)}</span>
                                        <button onclick="${config.action}('${pedido.id}')" class="bg-${config.color}-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-${config.color}-600 transition-colors">
                                            ${config.text}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = pedidosHTML;
        }

        function renderizarPedidosMobile(pedidos, containerId, tipo) {
            const container = document.getElementById(containerId);
            if (!container) return;

            if (pedidos.length === 0) {
                const emptyMessages = {
                    'aguardando': 'Nenhum pedido aguardando',
                    'prontos': 'Nenhum pedido pronto',
                    'novos': 'Nenhum pedido novo',
                    'preparo': 'Nenhum pedido em preparo',
                    'pendentes': 'Nenhuma entrega pendente',
                    'rota': 'Nenhuma entrega em rota'
                };
                
                const icons = {
                    'aguardando': 'clock',
                    'prontos': 'check-circle',
                    'novos': 'bell',
                    'preparo': 'utensils',
                    'pendentes': 'clock',
                    'rota': 'truck'
                };

                container.innerHTML = `
                    <div class="text-center py-6 text-gray-400">
                        <i class="fas fa-${icons[tipo]} text-xl mb-2"></i>
                        <p class="text-sm">${emptyMessages[tipo]}</p>
                    </div>
                `;
                return;
            }

            const pedidosHTML = pedidos.map((pedido, index) => {
                const buttonConfig = {
                    'aguardando': { text: 'Aceitar', action: 'aceitarPedido', color: 'blue' },
                    'prontos': { text: 'Despachar', action: 'despacharPedido', color: 'green' },
                    'novos': { text: 'Preparar', action: 'prepararPedido', color: 'blue' },
                    'preparo': { text: 'Finalizar', action: 'finalizarPedido', color: 'green' },
                    'pendentes': { text: 'Coletar', action: 'coletarPedido', color: 'blue' },
                    'rota': { text: 'Confirmar', action: 'confirmarEntrega', color: 'green' }
                };

                const config = buttonConfig[tipo];
                
                return `
                    <div class="px-3 py-3 ${index > 0 ? 'border-t border-gray-200' : ''}">
                        <div class="bg-white hover:bg-gray-50 transition-colors cursor-pointer rounded-lg p-3 border border-gray-100">
                            <div class="space-y-2">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm font-semibold text-gray-900">#${pedido.id}</span>
                                    <span class="text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700">
                                        <i class="fas fa-motorcycle mr-1"></i>Delivery
                                    </span>
                                </div>
                                
                                <!-- 1. Dados do Cliente -->
                                <div class="space-y-1">
                                    <div class="flex items-center justify-between">
                                        <span class="text-xs text-gray-600">Cliente:</span>
                                        <span class="text-xs font-medium text-gray-900">${pedido.cliente}</span>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <span class="text-xs text-gray-600">Telefone:</span>
                                        <a href="https://wa.me/${pedido.telefone}" target="_blank" class="text-xs text-blue-600 hover:text-blue-800 flex items-center">
                                            <i class="fab fa-whatsapp mr-1"></i>${pedido.telefoneFormatado}
                                        </a>
                                    </div>
                                </div>
                                
                                <!-- 2. Detalhes do Pedido -->
                                <div class="border-t border-gray-200 pt-2">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-xs text-gray-600">Itens:</span>
                                        <span class="text-xs font-medium text-gray-900">${pedido.itens.reduce((total, item) => total + item.quantidade, 0)}</span>
                                    </div>
                                    
                                    <div class="space-y-1">
                                        ${pedido.itens.slice(0, 2).map(item => `
                                            <div class="text-xs text-gray-900">
                                                <div class="font-medium">${item.quantidade}x ${item.nome}</div>
                                                ${item.observacoes && item.observacoes.length > 0 ? `
                                                    <div class="text-xs text-gray-600 ml-1 mt-0.5">(${item.observacoes.slice(0, 2).join(', ')}${item.observacoes.length > 2 ? `, +${item.observacoes.length - 2}` : ''})</div>
                                                ` : ''}
                                            </div>
                                        `).join('')}
                                        ${pedido.itens.length > 2 ? `<div class="text-xs text-gray-500">+${pedido.itens.length - 2} mais itens</div>` : ''}
                                    </div>
                                </div>
                                
                                <!-- 3. Endereço e Horário -->
                                <div class="border-t border-gray-200 pt-2 space-y-1">
                                    ${pedido.endereco ? `
                                        <div class="flex items-start justify-between">
                                            <span class="text-xs text-gray-600">Endereço:</span>
                                            <div class="text-right">
                                                <a href="https://maps.google.com/?q=${encodeURIComponent(pedido.endereco)}" target="_blank" class="text-xs text-blue-600 hover:text-blue-800 flex items-center">
                                                    <i class="fas fa-map-marker-alt mr-1"></i>${pedido.endereco} • ${pedido.distancia}
                                                </a>
                                            </div>
                                        </div>
                                    ` : ''}
                                    
                                    <div class="flex items-center justify-between">
                                        <span class="text-xs text-gray-600">Horário:</span>
                                        <div class="text-right">
                                            <div class="text-xs text-gray-700">${pedido.hora}${pedido.tempo ? ` • ${pedido.tempo}` : ''}</div>
                                        </div>
                                    </div>
                                    
                                    ${pedido.entregador ? `
                                        <div class="flex items-center justify-between">
                                            <span class="text-xs text-gray-600">Entregador:</span>
                                            <span class="text-xs font-medium text-gray-900">${pedido.entregador}</span>
                                        </div>
                                    ` : ''}
                                </div>
                                
                                <!-- 4. Rodapé com Total e Botão -->
                                <div class="border-t border-gray-200 pt-2 space-y-2">
                                    <div class="space-y-1">
                                        <div class="flex items-center justify-between">
                                            <span class="text-xs text-gray-600">Forma de Pagamento:</span>
                                            <span class="text-xs font-medium text-gray-900">${pedido.formaPagamento}</span>
                                        </div>
                                        
                                        <div class="flex items-center justify-between">
                                            <span class="text-xs text-gray-600">Status do Pagamento:</span>
                                            <span class="text-xs font-medium ${pedido.statusPagamento === 'Pago' ? 'text-green-600' : 'text-amber-600'}">${pedido.statusPagamento}</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm font-bold text-gray-900">R$ ${pedido.total.toFixed(2)}</span>
                                        <button onclick="${config.action}('${pedido.id}')" class="bg-${config.color}-500 text-white px-3 py-1 rounded text-xs font-medium hover:bg-${config.color}-600 transition-colors">
                                            ${config.text}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = pedidosHTML;
        }

        function atualizarAba(tabName) {
            if (tabName === 'pedidos') {
                renderizarPedidos(pedidosData.aguardando, 'coluna-aguardando', 'aguardando');
                renderizarPedidos(pedidosData.prontos, 'coluna-prontos', 'prontos');
                renderizarPedidosMobile(pedidosData.aguardando, 'coluna-aguardando-mobile', 'aguardando');
                renderizarPedidosMobile(pedidosData.prontos, 'coluna-prontos-mobile', 'prontos');
                
            } else if (tabName === 'salao') {
                renderizarMesas();
                renderizarComandas();
                
            } else if (tabName === 'kds') {
                renderizarPedidos(pedidosData.novos, 'coluna-novos', 'novos');
                renderizarPedidos(pedidosData.preparo, 'coluna-preparo', 'preparo');
                renderizarPedidosMobile(pedidosData.novos, 'coluna-novos-mobile', 'novos');
                renderizarPedidosMobile(pedidosData.preparo, 'coluna-preparo-mobile', 'preparo');
                
            } else if (tabName === 'entregas') {
                renderizarPedidos(pedidosData.pendentes, 'coluna-pendentes', 'pendentes');
                renderizarPedidos(pedidosData.rota, 'coluna-rota', 'rota');
                renderizarPedidosMobile(pedidosData.pendentes, 'coluna-pendentes-mobile', 'pendentes');
                renderizarPedidosMobile(pedidosData.rota, 'coluna-rota-mobile', 'rota');
            }
            atualizarContadores();
        }

        // Funções do Salão
        function alternarVisualizacao(tipo) {
            // Atualizar botões
            document.getElementById('btn-mesas').classList.remove('bg-orange-100', 'text-orange-700');
            document.getElementById('btn-comandas').classList.remove('bg-orange-100', 'text-orange-700');
            document.getElementById('btn-mesas').classList.add('text-gray-600');
            document.getElementById('btn-comandas').classList.add('text-gray-600');
            
            // Esconder todas as visualizações
            document.querySelectorAll('.salao-view').forEach(view => {
                view.classList.add('hidden');
            });
            
            // Mostrar visualização selecionada e ativar botão
            if (tipo === 'mesas') {
                document.getElementById('view-mesas').classList.remove('hidden');
                document.getElementById('btn-mesas').classList.add('bg-orange-100', 'text-orange-700');
                document.getElementById('btn-mesas').classList.remove('text-gray-600');
            } else {
                document.getElementById('view-comandas').classList.remove('hidden');
                document.getElementById('btn-comandas').classList.add('bg-orange-100', 'text-orange-700');
                document.getElementById('btn-comandas').classList.remove('text-gray-600');
            }
        }

        function renderizarMesas() {
            const container = document.getElementById('grade-mesas');
            if (!container) return;

            const mesasHTML = salaoData.mesas.map(mesa => {
                const statusConfig = {
                    'livre': { color: 'green', icon: 'check-circle', text: 'Livre' },
                    'ocupada': { color: 'orange', icon: 'users', text: 'Ocupada' },
                    'reservada': { color: 'red', icon: 'clock', text: 'Reservada' }
                };

                const config = statusConfig[mesa.status];
                
                return `
                    <div onclick="gerenciarMesa(${mesa.id})" class="bg-white border-2 border-${config.color}-200 rounded-lg p-4 cursor-pointer hover:shadow-md transition-all hover:border-${config.color}-300">
                        <div class="text-center space-y-2">
                            <div class="flex items-center justify-center">
                                <i class="fas fa-${config.icon} text-${config.color}-500 text-2xl"></i>
                            </div>
                            
                            <div>
                                <h4 class="font-semibold text-gray-800">Mesa ${mesa.id}</h4>
                                <p class="text-xs text-gray-600">${mesa.capacidade} lugares</p>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = mesasHTML;
        }

        function renderizarComandas() {
            const container = document.getElementById('lista-comandas');
            if (!container) return;

            const comandasAtivas = salaoData.comandas.filter(comanda => comanda.status === 'ativa');

            if (comandasAtivas.length === 0) {
                container.innerHTML = `
                    <div class="p-8 text-center text-gray-400">
                        <i class="fas fa-receipt text-2xl mb-2"></i>
                        <p class="text-sm">Nenhuma comanda ativa</p>
                    </div>
                `;
                return;
            }

            const comandasHTML = comandasAtivas.map(comanda => `
                <div class="p-6 hover:bg-gray-50 transition-colors">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <div class="flex items-center justify-between">
                                <h4 class="text-lg font-semibold text-gray-800">Comanda ${comanda.id}</h4>
                                <span class="inline-block px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700">
                                    Ativa
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            container.innerHTML = comandasHTML;
        }

        function gerenciarMesa(mesaId) {
            const mesa = salaoData.mesas.find(m => m.id === mesaId);
            if (!mesa) return;

            if (mesa.status === 'livre') {
                const acao = confirm('Mesa livre. Deseja ocupar (OK) ou reservar (Cancelar)?');
                if (acao) {
                    ocuparMesa(mesa);
                } else {
                    reservarMesa(mesa);
                }
            } else {
                const info = `Mesa ${mesa.id}\nCliente: ${mesa.cliente}\nStatus: ${mesa.status}\nTotal: R$ ${mesa.total.toFixed(2)}`;
                alert(info);
            }
        }

        function ocuparMesa(mesa) {
            const cliente = prompt('Nome do cliente:');
            if (cliente) {
                mesa.status = 'ocupada';
                mesa.cliente = cliente;
                mesa.horario = new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
                mesa.pessoas = 1;
                mesa.total = 0;
                mesa.pedidos = [];
                mesa.pagamentos = [];
                renderizarMesas();
            }
        }

        function reservarMesa(mesa) {
            const cliente = prompt('Nome do cliente:');
            if (!cliente) return;
            
            const horario = prompt('Horário da reserva (ex: 19:30):');
            if (horario) {
                mesa.status = 'reservada';
                mesa.cliente = cliente;
                mesa.horario = horario;
                mesa.pessoas = 1;
                renderizarMesas();
            }
        }



        // Funções de fluxo dos pedidos
        function aceitarPedido(id) {
            const pedidoIndex = pedidosData.aguardando.findIndex(p => p.id === id);
            if (pedidoIndex !== -1) {
                const pedido = pedidosData.aguardando.splice(pedidoIndex, 1)[0];
                pedidosData.novos.push(pedido);
                atualizarAba('pedidos');
                atualizarContadores();
            }
        }

        function prepararPedido(id) {
            const pedidoIndex = pedidosData.novos.findIndex(p => p.id === id);
            if (pedidoIndex !== -1) {
                const pedido = pedidosData.novos.splice(pedidoIndex, 1)[0];
                pedido.tempo = '15min'; // Tempo estimado de preparo
                pedidosData.preparo.push(pedido);
                atualizarAba('kds');
                atualizarContadores();
            }
        }

        function finalizarPedido(id) {
            const pedidoIndex = pedidosData.preparo.findIndex(p => p.id === id);
            if (pedidoIndex !== -1) {
                const pedido = pedidosData.preparo.splice(pedidoIndex, 1)[0];
                pedido.tempo = '2min'; // Tempo que está pronto
                pedidosData.prontos.push(pedido);
                atualizarAba('kds');
                atualizarContadores();
            }
        }

        // Sistema de despacho com dropdown de entregadores
        let dropdownAberto = null;

        function despacharPedido(pedidoId) {
            // Fechar qualquer dropdown aberto
            fecharDropdown();
            
            // Criar e mostrar dropdown de entregadores
            mostrarDropdownEntregadores(pedidoId);
        }

        function mostrarDropdownEntregadores(pedidoId) {
            // Encontrar o botão que foi clicado
            const botao = event.target;
            const rect = botao.getBoundingClientRect();
            
            // Criar dropdown
            const dropdown = document.createElement('div');
            dropdown.id = 'dropdown-entregadores';
            dropdown.className = 'fixed bg-white border border-gray-300 rounded-lg shadow-lg z-50 min-w-64';
            
            // Calcular posicionamento inteligente
            const dropdownWidth = 256; // min-w-64 = 16rem = 256px
            const dropdownHeight = 300; // altura estimada
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const scrollX = window.scrollX;
            const scrollY = window.scrollY;
            
            let top = rect.bottom + scrollY + 8;
            let left = rect.left + scrollX;
            
            // Ajustar horizontalmente se sair da tela
            if (left + dropdownWidth > viewportWidth + scrollX) {
                left = rect.right + scrollX - dropdownWidth; // Alinhar à direita do botão
            }
            
            // Se ainda sair da tela pela esquerda
            if (left < scrollX + 10) {
                left = scrollX + 10; // Margem mínima da esquerda
            }
            
            // Ajustar verticalmente se sair da tela
            if (top + dropdownHeight > viewportHeight + scrollY) {
                top = rect.top + scrollY - dropdownHeight - 8; // Mostrar acima do botão
            }
            
            // Se ainda sair da tela por cima
            if (top < scrollY + 10) {
                top = scrollY + 10; // Margem mínima do topo
            }
            
            dropdown.style.top = top + 'px';
            dropdown.style.left = left + 'px';
            
            // Filtrar entregadores disponíveis
            const entregadoresDisponiveis = entregadoresData.disponiveis.filter(e => e.status === 'disponivel');
            
            let dropdownHTML = `
                <div class="p-3 border-b border-gray-200 bg-gray-50">
                    <h4 class="text-sm font-semibold text-gray-800">Selecionar Entregador</h4>
                    <p class="text-xs text-gray-600">Pedido #${pedidoId}</p>
                </div>
                <div class="max-h-64 overflow-y-auto">
            `;
            
            if (entregadoresDisponiveis.length === 0) {
                dropdownHTML += `
                    <div class="p-4 text-center text-gray-500">
                        <i class="fas fa-exclamation-triangle text-amber-500 mb-2"></i>
                        <p class="text-sm">Nenhum entregador disponível</p>
                    </div>
                `;
            } else {
                entregadoresDisponiveis.forEach(entregador => {
                    const iconVeiculo = {
                        'Moto': 'motorcycle',
                        'Bicicleta': 'bicycle',
                        'Carro': 'car'
                    };
                    
                    dropdownHTML += `
                        <div onclick="selecionarEntregador('${pedidoId}', ${entregador.id})" 
                             class="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                        <i class="fas fa-${iconVeiculo[entregador.veiculo]} text-blue-600 text-sm"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm font-medium text-gray-900">${entregador.nome}</p>
                                        <p class="text-xs text-gray-600">${entregador.veiculo}</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-xs text-gray-500">${entregador.entregas} entregas hoje</p>
                                    <span class="inline-block w-2 h-2 bg-green-400 rounded-full"></span>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            dropdownHTML += `
                </div>
                <div class="p-3 border-t border-gray-200 bg-gray-50">
                    <button onclick="fecharDropdown()" class="w-full text-sm text-gray-600 hover:text-gray-800 py-1">
                        Cancelar
                    </button>
                </div>
            `;
            
            dropdown.innerHTML = dropdownHTML;
            document.body.appendChild(dropdown);
            dropdownAberto = dropdown;
            
            // Fechar dropdown ao clicar fora
            setTimeout(() => {
                document.addEventListener('click', fecharDropdownFora);
            }, 100);
        }

        function selecionarEntregador(pedidoId, entregadorId) {
            const entregador = entregadoresData.disponiveis.find(e => e.id === entregadorId);
            if (!entregador) return;
            
            // Encontrar o pedido na lista de prontos
            const pedidoIndex = pedidosData.prontos.findIndex(p => p.id === pedidoId);
            if (pedidoIndex !== -1) {
                const pedido = pedidosData.prontos.splice(pedidoIndex, 1)[0];
                
                // Atribuir entregador ao pedido
                pedido.entregador = entregador.nome;
                pedido.tempoDesignacao = new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
                pedido.status = 'pendente';
                
                // Marcar entregador como ocupado
                entregador.status = 'ocupado';
                entregador.entregas += 1;
                
                // Mover pedido para pendentes
                pedidosData.pendentes.push(pedido);
                
                // Atualizar interface
                atualizarAba('pedidos');
                atualizarContadores();
                
                // Mostrar confirmação
                mostrarNotificacao(`Pedido #${pedidoId} atribuído para ${entregador.nome}`, 'success');
            }
            
            fecharDropdown();
        }

        function fecharDropdown() {
            if (dropdownAberto) {
                dropdownAberto.remove();
                dropdownAberto = null;
                document.removeEventListener('click', fecharDropdownFora);
            }
        }

        function fecharDropdownFora(event) {
            if (dropdownAberto && !dropdownAberto.contains(event.target)) {
                fecharDropdown();
            }
        }

        function mostrarNotificacao(mensagem, tipo = 'info') {
            const notificacao = document.createElement('div');
            notificacao.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transition-all duration-300 transform translate-x-full`;
            
            const cores = {
                'success': 'bg-green-100 border border-green-200 text-green-800',
                'error': 'bg-red-100 border border-red-200 text-red-800',
                'info': 'bg-blue-100 border border-blue-200 text-blue-800'
            };
            
            const icones = {
                'success': 'check-circle',
                'error': 'exclamation-circle',
                'info': 'info-circle'
            };
            
            notificacao.className += ` ${cores[tipo]}`;
            notificacao.innerHTML = `
                <div class="flex items-center space-x-3">
                    <i class="fas fa-${icones[tipo]} text-lg"></i>
                    <p class="text-sm font-medium">${mensagem}</p>
                </div>
            `;
            
            document.body.appendChild(notificacao);
            
            // Animar entrada
            setTimeout(() => {
                notificacao.classList.remove('translate-x-full');
            }, 100);
            
            // Remover após 3 segundos
            setTimeout(() => {
                notificacao.classList.add('translate-x-full');
                setTimeout(() => {
                    notificacao.remove();
                }, 300);
            }, 3000);
        }

        function coletarPedido(id) {
            const pedidoIndex = pedidosData.pendentes.findIndex(p => p.id === id);
            if (pedidoIndex !== -1) {
                const pedido = pedidosData.pendentes.splice(pedidoIndex, 1)[0];
                pedido.tempoSaida = new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
                pedido.previsaoEntrega = new Date(Date.now() + 30*60000).toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
                pedido.status = 'saindo';
                pedidosData.rota.push(pedido);
                atualizarAba('entregas');
                atualizarContadores();
            }
        }

        function confirmarEntrega(id) {
            const pedidoIndex = pedidosData.rota.findIndex(p => p.id === id);
            if (pedidoIndex !== -1) {
                const pedido = pedidosData.rota.splice(pedidoIndex, 1)[0];
                
                // Liberar entregador
                const entregador = entregadoresData.disponiveis.find(e => e.nome === pedido.entregador);
                if (entregador) {
                    entregador.status = 'disponivel';
                }
                
                atualizarAba('entregas');
                atualizarContadores();
            }
        }



        // Inicializar sistema
        document.addEventListener('DOMContentLoaded', function() {
            atualizarContadores();
            atualizarAba('pedidos'); // Carregar aba inicial
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9810f13471dce2b9',t:'MTc1ODE5OTU0NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
