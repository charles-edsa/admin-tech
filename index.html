<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Delivery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { font-family: 'Inter', sans-serif; }
        .hover-lift { transition: all 0.3s ease; }
        .hover-lift:hover { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Barra de Menu Superior -->
    <nav class="bg-white border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-8">
            <!-- Mobile Header -->
            <div class="flex justify-between items-center h-14 md:h-16">
                <h1 class="text-gray-800 text-lg md:text-xl font-semibold">
                    <i class="fas fa-store text-orange-500 mr-1 md:mr-2"></i>
                    <span class="hidden sm:inline">Painel Admin</span>
                    <span class="sm:hidden">Admin</span>
                </h1>
                
                <!-- Mobile Menu Button -->
                <button onclick="toggleMobileMenu()" class="md:hidden p-2 text-gray-600">
                    <i class="fas fa-bars text-lg"></i>
                </button>
                
                <!-- Desktop User Info -->
                <div class="hidden md:flex items-center">
                    <div class="text-gray-600 text-sm">
                        <i class="fas fa-user-circle text-gray-400 mr-2"></i>
                        Admin
                    </div>
                </div>
            </div>
            
            <!-- Desktop Navigation -->
            <div class="hidden md:block">
                <nav class="flex space-x-8 -mb-px">
                    <button onclick="switchTab('pedidos')" id="tab-pedidos" class="tab-button border-b-2 border-orange-500 py-2 px-1 text-sm font-medium text-orange-600 flex items-center">
                        <i class="fas fa-clipboard-list mr-2"></i>Pedidos
                    </button>
                    <button onclick="switchTab('salao')" id="tab-salao" class="tab-button border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 flex items-center">
                        <i class="fas fa-utensils mr-2"></i>Salão
                    </button>
                    <button onclick="switchTab('kds')" id="tab-kds" class="tab-button border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 flex items-center">
                        <i class="fas fa-tv mr-2"></i>Painel KDS
                    </button>
                    <button onclick="switchTab('entregas')" id="tab-entregas" class="tab-button border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 flex items-center">
                        <i class="fas fa-truck mr-2"></i>Entregas
                    </button>
                    <button onclick="switchTab('catalogo')" id="tab-catalogo" class="tab-button border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 flex items-center">
                        <i class="fas fa-book mr-2"></i>Catálogo
                    </button>
                    <button onclick="switchTab('configuracoes')" id="tab-configuracoes" class="tab-button border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 flex items-center">
                        <i class="fas fa-cog mr-2"></i>Configurações
                    </button>
                </nav>
            </div>
            
            <!-- Mobile Navigation -->
            <div id="mobile-menu" class="md:hidden hidden bg-white border-t border-gray-200 py-2">
                <div class="grid grid-cols-2 gap-2 px-2">
                    <button onclick="switchTab('pedidos'); toggleMobileMenu();" id="mobile-tab-pedidos" class="mobile-tab-button bg-orange-100 text-orange-700 p-3 rounded-lg text-sm font-medium flex flex-col items-center">
                        <i class="fas fa-clipboard-list text-lg mb-1"></i>
                        <span>Pedidos</span>
                    </button>
                    <button onclick="switchTab('salao'); toggleMobileMenu();" id="mobile-tab-salao" class="mobile-tab-button bg-gray-100 text-gray-600 p-3 rounded-lg text-sm font-medium flex flex-col items-center">
                        <i class="fas fa-utensils text-lg mb-1"></i>
                        <span>Salão</span>
                    </button>
                    <button onclick="switchTab('kds'); toggleMobileMenu();" id="mobile-tab-kds" class="mobile-tab-button bg-gray-100 text-gray-600 p-3 rounded-lg text-sm font-medium flex flex-col items-center">
                        <i class="fas fa-tv text-lg mb-1"></i>
                        <span>KDS</span>
                    </button>
                    <button onclick="switchTab('entregas'); toggleMobileMenu();" id="mobile-tab-entregas" class="mobile-tab-button bg-gray-100 text-gray-600 p-3 rounded-lg text-sm font-medium flex flex-col items-center">
                        <i class="fas fa-truck text-lg mb-1"></i>
                        <span>Entregas</span>
                    </button>
                    <button onclick="switchTab('catalogo'); toggleMobileMenu();" id="mobile-tab-catalogo" class="mobile-tab-button bg-gray-100 text-gray-600 p-3 rounded-lg text-sm font-medium flex flex-col items-center">
                        <i class="fas fa-book text-lg mb-1"></i>
                        <span>Catálogo</span>
                    </button>
                    <button onclick="switchTab('configuracoes'); toggleMobileMenu();" id="mobile-tab-configuracoes" class="mobile-tab-button bg-gray-100 text-gray-600 p-3 rounded-lg text-sm font-medium flex flex-col items-center">
                        <i class="fas fa-cog text-lg mb-1"></i>
                        <span>Config</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Conteúdo Principal -->
    <div class="max-w-7xl mx-auto py-3 px-2 sm:py-6 sm:px-6 lg:px-8">

        <!-- Conteúdo da Aba Pedidos -->
        <div id="content-pedidos" class="tab-content">

            <!-- Campo Balcão -->
            <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm mb-4 md:mb-6">
                <div class="bg-gray-50 border-b border-gray-200 px-3 py-3 md:px-6 md:py-4">
                    <div class="flex items-center justify-between">
                        <h3 class="text-base md:text-lg font-semibold text-gray-900">
                            <i class="fas fa-store text-orange-500 mr-1 md:mr-2"></i>Balcão
                        </h3>
                        <span id="contador-balcao" class="bg-orange-100 text-orange-700 text-xs md:text-sm font-medium px-2 md:px-3 py-1 rounded">4 pedidos</span>
                    </div>
                </div>
                
                <div class="p-3 md:p-6">
                    <div id="pedidos-balcao" class="space-y-3 md:space-y-4">
                        <!-- Pedidos serão inseridos dinamicamente -->
                    </div>
                </div>
            </div>


        </div>

        <!-- Conteúdo da Aba Salão -->
        <div id="content-salao" class="tab-content hidden">
            <!-- Cabeçalho Mobile/Desktop -->
            <div class="mb-4 md:mb-6">
                <!-- Mobile Layout -->
                <div class="block md:hidden space-y-3">
                    <button onclick="openPDVModal()" class="w-full bg-green-500 text-white px-4 py-3 rounded-lg hover:bg-green-600 transition-colors font-medium shadow-sm text-center">
                        <i class="fas fa-cash-register mr-2"></i>Nova Venda
                    </button>
                    
                    <div class="flex bg-gray-100 rounded-lg p-1">
                        <button onclick="switchSalaoView('mesas')" id="view-mesas" class="salao-view-toggle flex-1 px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 bg-white text-gray-900 shadow-sm text-center">
                            <i class="fas fa-chair mr-1"></i>Mesas
                        </button>
                        <button onclick="switchSalaoView('comandas')" id="view-comandas" class="salao-view-toggle flex-1 px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 text-gray-500 hover:text-gray-700 text-center">
                            <i class="fas fa-receipt mr-1"></i>Comandas
                        </button>
                    </div>
                </div>
                
                <!-- Desktop Layout -->
                <div class="hidden md:flex items-center justify-between">
                    <div>
                        <button onclick="openPDVModal()" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors font-medium shadow-sm">
                            <i class="fas fa-cash-register mr-2"></i>Venda
                        </button>
                    </div>
                    
                    <div class="flex bg-gray-100 rounded-lg p-1">
                        <button onclick="switchSalaoView('mesas')" id="view-mesas-desktop" class="salao-view-toggle px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 bg-white text-gray-900 shadow-sm">
                            <i class="fas fa-chair mr-2"></i>Mesas
                        </button>
                        <button onclick="switchSalaoView('comandas')" id="view-comandas-desktop" class="salao-view-toggle px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 text-gray-500 hover:text-gray-700">
                            <i class="fas fa-receipt mr-2"></i>Comandas
                        </button>
                    </div>
                </div>
            </div>

            <!-- Painel Mesas -->
            <div id="mesas-panel" class="salao-panel">
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="bg-gray-50 border-b border-gray-200">
                        <div class="px-3 py-3 md:px-6 md:py-4">
                            <!-- Mobile Header -->
                            <div class="block md:hidden">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3">
                                    <i class="fas fa-chair text-orange-500 mr-1"></i>Mesas do Salão
                                </h3>
                                <div class="grid grid-cols-3 gap-2">
                                    <div class="flex flex-col items-center space-y-1">
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-xs text-gray-600">Livre</span>
                                        </div>
                                        <span class="bg-green-100 text-green-700 text-xs font-medium px-2 py-1 rounded">5</span>
                                    </div>
                                    <div class="flex flex-col items-center space-y-1">
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                            <span class="text-xs text-gray-600">Ocupada</span>
                                        </div>
                                        <span class="bg-red-100 text-red-700 text-xs font-medium px-2 py-1 rounded">2</span>
                                    </div>
                                    <div class="flex flex-col items-center space-y-1">
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-amber-500 rounded-full"></div>
                                            <span class="text-xs text-gray-600">Reservada</span>
                                        </div>
                                        <span class="bg-amber-100 text-amber-700 text-xs font-medium px-2 py-1 rounded">1</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Desktop Header -->
                            <div class="hidden md:flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-chair text-orange-500 mr-2"></i>Mesas do Salão
                                </h3>
                                <div class="flex items-center space-x-6">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                        <span class="text-sm text-gray-600">Livre</span>
                                        <span class="bg-green-100 text-green-700 text-xs font-medium px-2 py-1 rounded">5</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                        <span class="text-sm text-gray-600">Ocupada</span>
                                        <span class="bg-red-100 text-red-700 text-xs font-medium px-2 py-1 rounded">2</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-3 h-3 bg-amber-500 rounded-full"></div>
                                        <span class="text-sm text-gray-600">Reservada</span>
                                        <span class="bg-amber-100 text-amber-700 text-xs font-medium px-2 py-1 rounded">1</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-3 md:p-6">
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 md:gap-4" id="mesas-grid">
                            <!-- Mesas serão inseridas dinamicamente -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Painel Comandas -->
            <div id="comandas-panel" class="salao-panel hidden">
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="bg-gray-50 border-b border-gray-200">
                        <div class="px-3 py-3 md:px-6 md:py-4">
                            <!-- Mobile Header -->
                            <div class="block md:hidden space-y-3">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-receipt text-orange-500 mr-1"></i>Comandas Ativas
                                </h3>
                                <button onclick="novaComandaAvulsa()" class="w-full bg-orange-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors">
                                    <i class="fas fa-plus mr-2"></i>Nova Comanda
                                </button>
                            </div>
                            
                            <!-- Desktop Header -->
                            <div class="hidden md:flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-receipt text-orange-500 mr-2"></i>Comandas Ativas
                                </h3>
                                <button onclick="novaComandaAvulsa()" class="bg-orange-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors">
                                    <i class="fas fa-plus mr-2"></i>Nova Comanda
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-3 md:p-6">
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4" id="comandas-grid">
                            <!-- Comandas serão inseridas dinamicamente -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Conteúdo da Aba KDS -->
        <div id="content-kds" class="tab-content hidden">
            <!-- Mobile KDS Layout -->
            <div class="block md:hidden space-y-4">
                <!-- Novos Pedidos Mobile -->
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="bg-orange-50 border-b border-orange-200 px-3 py-3">
                        <div class="flex items-center justify-between">
                            <h3 class="text-sm font-semibold text-orange-700 uppercase tracking-wide">
                                <i class="fas fa-bell text-orange-500 mr-1"></i>Novos
                            </h3>
                            <span id="contador-novos-kds-mobile" class="bg-orange-100 text-orange-700 text-xs font-medium px-2 py-1 rounded">3</span>
                        </div>
                    </div>
                    <div id="coluna-novos-kds-mobile" class="p-3">
                        <!-- Conteúdo será inserido dinamicamente -->
                    </div>
                </div>

                <!-- Em Preparo Mobile -->
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="bg-amber-50 border-b border-amber-200 px-3 py-3">
                        <div class="flex items-center justify-between">
                            <h3 class="text-sm font-semibold text-amber-700 uppercase tracking-wide">
                                <i class="fas fa-clock text-amber-500 mr-1"></i>Preparo
                            </h3>
                            <span id="contador-preparo-kds-mobile" class="bg-amber-100 text-amber-700 text-xs font-medium px-2 py-1 rounded">2</span>
                        </div>
                    </div>
                    <div id="coluna-preparo-kds-mobile" class="p-3">
                        <!-- Conteúdo será inserido dinamicamente -->
                    </div>
                </div>

                <!-- Prontos Mobile -->
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <div class="bg-green-50 border-b border-green-200 px-3 py-3">
                        <div class="flex items-center justify-between">
                            <h3 class="text-sm font-semibold text-green-700 uppercase tracking-wide">
                                <i class="fas fa-check-circle text-green-500 mr-1"></i>Prontos
                            </h3>
                            <span id="contador-prontos-kds-mobile" class="bg-green-100 text-green-700 text-xs font-medium px-2 py-1 rounded">1</span>
                        </div>
                    </div>
                    <div id="coluna-prontos-kds-mobile" class="p-3">
                        <!-- Conteúdo será inserido dinamicamente -->
                    </div>
                </div>
            </div>

            <!-- Desktop KDS Layout -->
            <div id="delivery-panel-kds" class="hidden md:block pedidos-panel">
                <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
                    <!-- Cabeçalho das Colunas -->
                    <div class="grid grid-cols-3 bg-gray-50 border-b border-gray-200">
                        <div class="px-6 py-4 border-r border-gray-200">
                            <div class="flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-bell text-orange-500 mr-2"></i>Novos Pedidos
                                </h3>
                                <span id="contador-novos-kds" class="bg-orange-100 text-orange-700 text-xs font-medium px-2 py-1 rounded">3</span>
                            </div>
                        </div>
                        <div class="px-6 py-4 border-r border-gray-200">
                            <div class="flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-clock text-blue-500 mr-2"></i>Em Preparo
                                </h3>
                                <span id="contador-preparo-kds" class="bg-amber-100 text-amber-700 text-xs font-medium px-2 py-1 rounded">2</span>
                            </div>
                        </div>
                        <div class="px-6 py-4">
                            <div class="flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wide">
                                    <i class="fas fa-check-circle text-green-500 mr-2"></i>Prontos
                                </h3>
                                <span id="contador-prontos-kds" class="bg-green-100 text-green-700 text-xs font-medium px-2 py-1 rounded">1</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo das Colunas -->
                    <div class="grid grid-cols-3 min-h-96">
                        <!-- Coluna Novos -->
                        <div id="coluna-novos-kds" class="border-r border-gray-200 bg-white">
                            <!-- Conteúdo será inserido dinamicamente -->
                        </div>

                        <!-- Coluna Preparando -->
                        <div id="coluna-preparo-kds" class="border-r border-gray-200 bg-white">
                            <!-- Conteúdo será inserido dinamicamente -->
                        </div>

                        <!-- Coluna Prontos -->
                        <div id="coluna-prontos-kds" class="bg-white">
                            <!-- Conteúdo será inserido dinamicamente -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Conteúdo da Aba Entregas -->
        <div id="content-entregas" class="tab-content hidden">
            <div class="bg-white rounded-lg border border-gray-200 p-4 md:p-8">
                <div class="text-center text-gray-500">
                    <i class="fas fa-truck text-3xl md:text-4xl mb-3 md:mb-4"></i>
                    <h3 class="text-base md:text-lg font-medium text-gray-900 mb-2">Entregas</h3>
                    <p class="text-sm">Esta seção estará disponível em breve.</p>
                </div>
            </div>
        </div>

        <!-- Conteúdo da Aba Catálogo -->
        <div id="content-catalogo" class="tab-content hidden">
            <div class="bg-white rounded-lg border border-gray-200 p-4 md:p-8">
                <div class="text-center text-gray-500">
                    <i class="fas fa-book text-3xl md:text-4xl mb-3 md:mb-4"></i>
                    <h3 class="text-base md:text-lg font-medium text-gray-900 mb-2">Catálogo de Produtos</h3>
                    <p class="text-sm">Esta seção estará disponível em breve.</p>
                </div>
            </div>
        </div>

        <!-- Conteúdo da Aba Configurações -->
        <div id="content-configuracoes" class="tab-content hidden">
            <div class="bg-white rounded-lg border border-gray-200 p-4 md:p-8">
                <div class="text-center text-gray-500">
                    <i class="fas fa-cog text-3xl md:text-4xl mb-3 md:mb-4"></i>
                    <h3 class="text-base md:text-lg font-medium text-gray-900 mb-2">Configurações do Sistema</h3>
                    <p class="text-sm">Esta seção estará disponível em breve.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal da Mesa -->
    <div id="mesa-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden p-2">
        <div class="bg-white rounded-lg p-4 md:p-6 w-full max-w-md mx-2 md:mx-4">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center space-x-2 md:space-x-3">
                    <h3 class="text-base md:text-lg font-semibold text-gray-800">Mesa <span id="mesa-number">1</span></h3>
                    <span id="mesa-status" class="text-xs md:text-sm font-semibold px-2 md:px-3 py-1 rounded-full bg-green-100 text-green-700">Livre</span>
                </div>
                <button onclick="closeMesaModal()" class="text-gray-400 hover:text-gray-600 p-1">
                    <i class="fas fa-times text-lg md:text-xl"></i>
                </button>
            </div>
            <div id="mesa-content">
                <!-- Conteúdo dinâmico será inserido aqui -->
            </div>
        </div>
    </div>

    <!-- Modal PDV -->
    <div id="pdv-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden p-2 md:p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[95vh] md:max-h-[90vh] flex flex-col">
            <!-- Header Mobile/Desktop -->
            <div class="flex items-center justify-between p-3 md:p-4 border-b border-gray-200 flex-shrink-0">
                <!-- Mobile Categories (Horizontal Scroll) -->
                <div class="flex items-center space-x-2 overflow-x-auto scrollbar-hide md:space-x-2">
                    <button onclick="filterCategory('todos')" class="category-filter active px-3 py-2 text-xs md:text-sm font-medium rounded-lg bg-orange-100 text-orange-700 whitespace-nowrap">
                        Todos
                    </button>
                    <button onclick="filterCategory('lanches')" class="category-filter px-3 py-2 text-xs md:text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 whitespace-nowrap">
                        Lanches
                    </button>
                    <button onclick="filterCategory('bebidas')" class="category-filter px-3 py-2 text-xs md:text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 whitespace-nowrap">
                        Bebidas
                    </button>
                    <button onclick="filterCategory('porcoes')" class="category-filter px-3 py-2 text-xs md:text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 whitespace-nowrap">
                        Porções
                    </button>
                    <button onclick="filterCategory('sobremesas')" class="category-filter px-3 py-2 text-xs md:text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 whitespace-nowrap">
                        Sobremesas
                    </button>
                </div>
                <button onclick="closePDVModal()" class="text-gray-400 hover:text-gray-600 transition-colors ml-2 md:ml-4 p-1">
                    <i class="fas fa-times text-lg md:text-xl"></i>
                </button>
            </div>
            
            <div class="flex-1 overflow-hidden">
                <!-- Mobile Layout (Stack) -->
                <div class="block lg:hidden h-full">
                    <!-- Mobile Toggle -->
                    <div class="flex bg-gray-100 rounded-lg p-1 m-3">
                        <button onclick="togglePDVMobileView('produtos')" id="pdv-mobile-produtos" class="pdv-mobile-toggle flex-1 px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 bg-white text-gray-900 shadow-sm text-center">
                            <i class="fas fa-th-large mr-1"></i>Produtos
                        </button>
                        <button onclick="togglePDVMobileView('carrinho')" id="pdv-mobile-carrinho" class="pdv-mobile-toggle flex-1 px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 text-gray-500 hover:text-gray-700 text-center">
                            <i class="fas fa-shopping-cart mr-1"></i>Carrinho <span id="cart-count-mobile" class="bg-orange-500 text-white text-xs px-1 rounded-full ml-1 hidden">0</span>
                        </button>
                    </div>
                    
                    <!-- Mobile Produtos Panel -->
                    <div id="pdv-mobile-produtos-panel" class="pdv-mobile-panel flex-1 overflow-y-auto px-3 pb-3">
                        <div class="grid grid-cols-2 gap-3" id="produtos-grid-mobile">
                            <!-- Produtos serão inseridos aqui via JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Mobile Carrinho Panel -->
                    <div id="pdv-mobile-carrinho-panel" class="pdv-mobile-panel hidden flex-1 overflow-hidden flex flex-col px-3 pb-3">
                        <!-- Seleção de Destino Mobile -->
                        <div class="mb-4 flex-shrink-0">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Destino da Venda</h4>
                            <div class="space-y-2">
                                <div class="grid grid-cols-2 gap-2">
                                    <button onclick="setDestinoVenda('balcao')" id="destino-balcao-mobile" class="destino-toggle-mobile px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 bg-white text-gray-900">
                                        <i class="fas fa-store mr-1"></i>Balcão
                                    </button>
                                    <button onclick="setDestinoVenda('mesa')" id="destino-mesa-mobile" class="destino-toggle-mobile px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 text-gray-500">
                                        <i class="fas fa-chair mr-1"></i>Mesa
                                    </button>
                                </div>
                                <div class="grid grid-cols-2 gap-2">
                                    <button onclick="setDestinoVenda('comanda')" id="destino-comanda-mobile" class="destino-toggle-mobile px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 text-gray-500">
                                        <i class="fas fa-receipt mr-1"></i>Comanda
                                    </button>
                                    <button onclick="setDestinoVenda('delivery')" id="destino-delivery-mobile" class="destino-toggle-mobile px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 text-gray-500">
                                        <i class="fas fa-motorcycle mr-1"></i>Delivery
                                    </button>
                                </div>
                            </div>
                            
                            <div id="destino-especifico-mobile" class="mt-3 hidden">
                                <select id="select-destino-mobile" class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Itens do Carrinho Mobile -->
                        <div class="flex-1 overflow-hidden flex flex-col">
                            <div class="flex items-center justify-between mb-3 flex-shrink-0">
                                <h4 class="text-sm font-medium text-gray-900">Itens</h4>
                                <button onclick="clearCart()" class="text-xs text-red-500 hover:text-red-700">
                                    <i class="fas fa-trash mr-1"></i>Limpar
                                </button>
                            </div>
                            
                            <div id="cart-items-mobile" class="space-y-2 flex-1 overflow-y-auto mb-4">
                                <div class="text-center py-8 text-gray-400">
                                    <i class="fas fa-shopping-cart text-2xl mb-2"></i>
                                    <p class="text-sm">Nenhum item selecionado</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Forma de Pagamento Mobile -->
                        <div class="mb-4 flex-shrink-0">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Pagamento</h4>
                            <div class="grid grid-cols-2 gap-2">
                                <button onclick="setFormaPagamento('dinheiro')" id="pagamento-dinheiro-mobile" class="pagamento-toggle-mobile px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 text-gray-700">
                                    <i class="fas fa-money-bill mr-1"></i>Dinheiro
                                </button>
                                <button onclick="setFormaPagamento('cartao')" id="pagamento-cartao-mobile" class="pagamento-toggle-mobile px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 text-gray-700">
                                    <i class="fas fa-credit-card mr-1"></i>Cartão
                                </button>
                                <button onclick="setFormaPagamento('pix')" id="pagamento-pix-mobile" class="pagamento-toggle-mobile px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 text-gray-700">
                                    <i class="fas fa-qrcode mr-1"></i>PIX
                                </button>
                                <button onclick="setFormaPagamento('fiado')" id="pagamento-fiado-mobile" class="pagamento-toggle-mobile px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 text-gray-700">
                                    <i class="fas fa-handshake mr-1"></i>Fiado
                                </button>
                            </div>
                        </div>
                        
                        <!-- Resumo e Finalização Mobile -->
                        <div class="flex-shrink-0">
                            <div class="bg-gray-50 rounded-lg p-3 mb-4">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm text-gray-600">Subtotal</span>
                                    <span id="cart-subtotal-mobile" class="text-sm font-medium text-gray-900">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-xs text-gray-500">Taxa (10%)</span>
                                    <span id="cart-taxa-mobile" class="text-xs text-gray-500">R$ 0,00</span>
                                </div>
                                <div class="border-t border-gray-200 pt-2">
                                    <div class="flex justify-between items-center">
                                        <span class="font-semibold text-gray-900">Total</span>
                                        <span id="cart-total-mobile" class="font-bold text-lg text-gray-900">R$ 0,00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <button onclick="finalizarVenda()" id="btn-finalizar-venda-mobile" class="w-full bg-green-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed" disabled>
                                <i class="fas fa-check mr-2"></i>Finalizar Venda
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Desktop Layout (Side by Side) -->
                <div class="hidden lg:grid lg:grid-cols-3 h-full">
                    <!-- Painel de Produtos -->
                    <div class="lg:col-span-2 border-r border-gray-200 flex flex-col">
                        <div class="flex-1 overflow-y-auto p-4">
                            <div class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4" id="produtos-grid">
                                <!-- Produtos serão inseridos aqui via JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Painel do Carrinho -->
                    <div class="lg:col-span-1 flex flex-col">
                        <!-- Seleção de Destino -->
                        <div class="p-4 border-b border-gray-200 flex-shrink-0">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Destino da Venda</h4>
                            <div class="space-y-2">
                                <div class="flex bg-gray-100 rounded-lg p-1">
                                    <button onclick="setDestinoVenda('balcao')" id="destino-balcao" class="destino-toggle flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 bg-white text-gray-900 shadow-sm">
                                        <i class="fas fa-store mr-1"></i>Balcão
                                    </button>
                                    <button onclick="setDestinoVenda('mesa')" id="destino-mesa" class="destino-toggle flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-chair mr-1"></i>Mesa
                                    </button>
                                </div>
                                <div class="flex bg-gray-100 rounded-lg p-1">
                                    <button onclick="setDestinoVenda('comanda')" id="destino-comanda" class="destino-toggle flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-receipt mr-1"></i>Comanda
                                    </button>
                                    <button onclick="setDestinoVenda('delivery')" id="destino-delivery" class="destino-toggle flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-motorcycle mr-1"></i>Delivery
                                    </button>
                                </div>
                            </div>
                            
                            <div id="destino-especifico" class="mt-3 hidden">
                                <select id="select-destino" class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Itens do Carrinho -->
                        <div class="flex-1 overflow-hidden p-4 flex flex-col">
                            <div class="flex items-center justify-between mb-4 flex-shrink-0">
                                <h4 class="text-sm font-medium text-gray-900">Itens Selecionados</h4>
                                <button onclick="clearCart()" class="text-xs text-red-500 hover:text-red-700">
                                    <i class="fas fa-trash mr-1"></i>Limpar
                                </button>
                            </div>
                            
                            <div id="cart-items" class="space-y-3 flex-1 overflow-y-auto">
                                <div class="text-center py-8 text-gray-400">
                                    <i class="fas fa-shopping-cart text-2xl mb-2"></i>
                                    <p class="text-sm">Nenhum item selecionado</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Forma de Pagamento -->
                        <div class="p-4 border-t border-gray-200 flex-shrink-0">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Forma de Pagamento</h4>
                            <div class="grid grid-cols-2 gap-2 mb-4">
                                <button onclick="setFormaPagamento('dinheiro')" id="pagamento-dinheiro" class="pagamento-toggle px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-money-bill mr-1"></i>Dinheiro
                                </button>
                                <button onclick="setFormaPagamento('cartao')" id="pagamento-cartao" class="pagamento-toggle px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-credit-card mr-1"></i>Cartão
                                </button>
                                <button onclick="setFormaPagamento('pix')" id="pagamento-pix" class="pagamento-toggle px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-qrcode mr-1"></i>PIX
                                </button>
                                <button onclick="setFormaPagamento('fiado')" id="pagamento-fiado" class="pagamento-toggle px-3 py-2 text-xs font-medium rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-handshake mr-1"></i>Fiado
                                </button>
                            </div>
                        </div>
                        
                        <!-- Resumo e Finalização -->
                        <div class="p-4 border-t border-gray-200 flex-shrink-0">
                            <div class="bg-gray-50 rounded-lg p-4 mb-4">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm text-gray-600">Subtotal</span>
                                    <span id="cart-subtotal" class="text-sm font-medium text-gray-900">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-xs text-gray-500">Taxa de serviço (10%)</span>
                                    <span id="cart-taxa" class="text-xs text-gray-500">R$ 0,00</span>
                                </div>
                                <div class="border-t border-gray-200 pt-2">
                                    <div class="flex justify-between items-center">
                                        <span class="font-semibold text-gray-900">Total</span>
                                        <span id="cart-total" class="font-bold text-lg text-gray-900">R$ 0,00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <button onclick="finalizarVenda()" id="btn-finalizar-venda" class="w-full bg-green-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed" disabled>
                                <i class="fas fa-check mr-2"></i>Finalizar Venda
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal do Pedido -->
    <div id="pedido-modal" class="fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 hidden p-2 md:p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] md:max-h-[85vh] flex flex-col mx-2 md:mx-0">
            <div class="flex items-center justify-between p-3 md:p-4 border-b border-gray-100 flex-shrink-0">
                <div class="flex items-center space-x-2">
                    <h3 class="text-base md:text-lg font-semibold text-gray-900">Pedido <span id="pedido-number">#001</span></h3>
                </div>
                <button onclick="closePedidoModal()" class="text-gray-400 hover:text-gray-600 transition-colors p-1">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>
            
            <div id="pedido-content" class="flex-1 overflow-y-auto p-3 md:p-4">
                <!-- Conteúdo dinâmico será inserido aqui -->
            </div>
        </div>
    </div>

    <script>
        // Estado global do sistema
        let pedidosData = {
            novos: [
                { id: '001', cliente: 'João Silva', telefone: '(11) 99999-1234', total: 45.90, itens: ['2x Hambúrguer', '1x Batata Frita'], tempo: '5min', hora: '10:30' },
                { id: '002', cliente: 'Maria Santos', telefone: '(11) 98888-5678', total: 32.00, itens: ['1x Pizza Margherita'], tempo: '2min', hora: '10:45' },
                { id: '025', cliente: 'Roberto Lima', telefone: '(11) 97777-9012', total: 18.50, itens: ['1x Açaí 500ml', '1x Vitamina'], tempo: '1min', hora: '11:05' }
            ],
            preparo: [
                { id: '003', cliente: 'Carlos Oliveira', telefone: '(11) 96666-3456', total: 28.50, itens: ['3x Pastel', '1x Refrigerante'], tempo: '25min', hora: '10:15' },
                { id: '026', cliente: 'Fernanda Costa', telefone: '(11) 95555-7890', total: 54.00, itens: ['2x Pizza Individual', '2x Refrigerante'], tempo: '15min', hora: '10:50' }
            ],
            prontos: [
                { id: '004', cliente: 'Ana Costa', telefone: '(11) 94444-2468', total: 35.00, itens: ['2x Açaí', '1x Suco Natural'], tempo: '3min', hora: '09:50' }
            ]
        };

        let pedidosBalcaoData = [
            { id: 'B001', cliente: 'Pedro Santos', telefone: '(11) 91111-2222', total: 28.90, itens: ['1x Hambúrguer', '1x Refrigerante'], tempoEspera: '3min', hora: '11:15', tipo: 'retirada' },
            { id: 'B002', cliente: 'Ana Silva', telefone: '(11) 92222-3333', total: 42.50, itens: ['2x Pizza Individual', '1x Suco'], tempoEspera: '1min', hora: '11:20', tipo: 'local' },
            { id: 'B003', cliente: 'Carlos Lima', telefone: '(11) 93333-4444', total: 35.00, itens: ['1x Pizza Margherita', '1x Batata'], tempoEspera: '8min', hora: '10:55', tipo: 'retirada' },
            { id: 'B004', cliente: 'Maria Costa', telefone: '(11) 94444-5555', total: 22.90, itens: ['1x Sanduíche', '1x Suco Natural'], tempoEspera: '12min', hora: '10:45', tipo: 'local' }
        ];

        let mesasData = {
            1: { status: 'livre', lugares: 4 },
            2: { status: 'ocupada', lugares: 4, pessoas: 4, tempo: '45min', comanda: 'C002' },
            3: { status: 'livre', lugares: 2 },
            4: { status: 'reservada', lugares: 6, cliente: 'João Silva', pessoas: 4, horario: '16:00' },
            5: { status: 'livre', lugares: 8 },
            6: { status: 'ocupada', lugares: 2, pessoas: 2, tempo: '1h20min', comanda: 'C006' },
            7: { status: 'livre', lugares: 2 },
            8: { status: 'livre', lugares: 6 }
        };

        let comandasData = {
            'C001': { cliente: 'João Silva', total: 34.50, tempo: '25min', status: 'ativa', itens: 2 },
            'C002': { cliente: 'Maria Santos', total: 18.90, tempo: '12min', status: 'ativa', itens: 1 },
            'C004': { cliente: 'Carlos Lima', total: 67.20, tempo: 'Aguardando', status: 'pendente', itens: 4 },
            'C006': { cliente: 'Ana Costa', total: 45.30, tempo: '1h20min', status: 'ativa', itens: 3 }
        };

        // Controle de Menu Mobile
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        }

        // Controle de Abas
        function switchTab(tabName) {
            // Desktop tabs
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('border-orange-500', 'text-orange-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Mobile tabs
            document.querySelectorAll('.mobile-tab-button').forEach(btn => {
                btn.classList.remove('bg-orange-100', 'text-orange-700');
                btn.classList.add('bg-gray-100', 'text-gray-600');
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Update desktop tab
            const activeTab = document.getElementById(`tab-${tabName}`);
            if (activeTab) {
                activeTab.classList.add('border-orange-500', 'text-orange-600');
                activeTab.classList.remove('border-transparent', 'text-gray-500');
            }
            
            // Update mobile tab
            const activeMobileTab = document.getElementById(`mobile-tab-${tabName}`);
            if (activeMobileTab) {
                activeMobileTab.classList.add('bg-orange-100', 'text-orange-700');
                activeMobileTab.classList.remove('bg-gray-100', 'text-gray-600');
            }
            
            document.getElementById(`content-${tabName}`).classList.remove('hidden');
        }



        // Atualização dinâmica dos pedidos no KDS
        function atualizarPainelKDS() {
            const colunas = {
                novos: document.getElementById('coluna-novos-kds'),
                preparo: document.getElementById('coluna-preparo-kds'),
                prontos: document.getElementById('coluna-prontos-kds')
            };

            const colunasMobile = {
                novos: document.getElementById('coluna-novos-kds-mobile'),
                preparo: document.getElementById('coluna-preparo-kds-mobile'),
                prontos: document.getElementById('coluna-prontos-kds-mobile')
            };

            // Atualizar contadores desktop
            const contadorNovos = document.getElementById('contador-novos-kds');
            const contadorPreparo = document.getElementById('contador-preparo-kds');
            const contadorProntos = document.getElementById('contador-prontos-kds');
            
            if (contadorNovos) contadorNovos.textContent = pedidosData.novos.length;
            if (contadorPreparo) contadorPreparo.textContent = pedidosData.preparo.length;
            if (contadorProntos) contadorProntos.textContent = pedidosData.prontos.length;

            // Atualizar contadores mobile
            const contadorNovosMobile = document.getElementById('contador-novos-kds-mobile');
            const contadorPreparoMobile = document.getElementById('contador-preparo-kds-mobile');
            const contadorProntosMobile = document.getElementById('contador-prontos-kds-mobile');
            
            if (contadorNovosMobile) contadorNovosMobile.textContent = pedidosData.novos.length;
            if (contadorPreparoMobile) contadorPreparoMobile.textContent = pedidosData.preparo.length;
            if (contadorProntosMobile) contadorProntosMobile.textContent = pedidosData.prontos.length;

            // Renderizar pedidos desktop e mobile
            Object.keys(colunas).forEach(status => {
                const coluna = colunas[status];
                const colunaMobile = colunasMobile[status];
                const pedidos = pedidosData[status];
                
                const emptyContent = `
                    <div class="p-6 text-center text-gray-400">
                        <i class="fas fa-${status === 'novos' ? 'bell' : status === 'preparo' ? 'clock' : 'check-circle'} text-2xl mb-2"></i>
                        <p class="text-sm">Nenhum pedido</p>
                    </div>
                `;

                const emptyContentMobile = `
                    <div class="text-center py-6 text-gray-400">
                        <i class="fas fa-${status === 'novos' ? 'bell' : status === 'preparo' ? 'clock' : 'check-circle'} text-xl mb-2"></i>
                        <p class="text-sm">Nenhum pedido</p>
                    </div>
                `;
                
                if (pedidos.length === 0) {
                    if (coluna) coluna.innerHTML = emptyContent;
                    if (colunaMobile) colunaMobile.innerHTML = emptyContentMobile;
                    return;
                }
                
                const pedidosHTML = pedidos.map((pedido, index) => `
                    <div class="px-4 py-4 ${index > 0 ? 'border-t border-gray-200' : ''}">
                        <div class="hover:bg-${status === 'novos' ? 'gray' : status === 'preparo' ? 'amber' : 'green'}-50 transition-colors cursor-pointer rounded-lg p-3" onclick="openPedidoModal('${pedido.id}', '${status}')">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-sm font-semibold text-gray-900">#${pedido.id}</span>
                                <div class="text-right">
                                    <div class="text-xs text-gray-500">${pedido.hora}</div>
                                    <div class="text-xs text-${status === 'novos' ? 'orange' : status === 'preparo' ? 'amber' : 'green'}-600 font-medium">${pedido.tempo}</div>
                                </div>
                            </div>
                            <p class="text-sm text-gray-700 font-medium mb-1">${pedido.cliente}</p>
                            <p class="text-xs text-gray-600 mb-3">${pedido.itens.join(', ')}</p>
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-bold text-gray-900">R$ ${pedido.total.toFixed(2)}</span>
                                <button onclick="event.stopPropagation(); ${status === 'novos' ? 'aceitarPedido' : status === 'preparo' ? 'finalizarPedido' : 'entregarPedido'}('${pedido.id}')" class="text-xs bg-${status === 'novos' ? 'blue' : status === 'preparo' ? 'green' : 'orange'}-500 text-white px-3 py-1 rounded hover:bg-${status === 'novos' ? 'blue' : status === 'preparo' ? 'green' : 'orange'}-600 transition-colors">
                                    ${status === 'novos' ? 'Preparar' : status === 'preparo' ? 'Finalizar' : 'Despachar'}
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');

                const pedidosMobileHTML = pedidos.map(pedido => `
                    <div class="bg-white border border-gray-200 rounded-lg p-3 mb-3 cursor-pointer hover:bg-gray-50" onclick="openPedidoModal('${pedido.id}', '${status}')">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-sm font-semibold text-gray-900">#${pedido.id}</span>
                            <div class="text-right">
                                <div class="text-xs text-gray-500">${pedido.hora}</div>
                                <div class="text-xs text-${status === 'novos' ? 'orange' : status === 'preparo' ? 'amber' : 'green'}-600 font-medium">${pedido.tempo}</div>
                            </div>
                        </div>
                        <p class="text-sm text-gray-700 font-medium mb-1">${pedido.cliente}</p>
                        <p class="text-xs text-gray-600 mb-3">${pedido.itens.join(', ')}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-bold text-gray-900">R$ ${pedido.total.toFixed(2)}</span>
                            <button onclick="event.stopPropagation(); ${status === 'novos' ? 'aceitarPedido' : status === 'preparo' ? 'finalizarPedido' : 'entregarPedido'}('${pedido.id}')" class="text-xs bg-${status === 'novos' ? 'blue' : status === 'preparo' ? 'green' : 'orange'}-500 text-white px-3 py-1 rounded hover:bg-${status === 'novos' ? 'blue' : status === 'preparo' ? 'green' : 'orange'}-600 transition-colors">
                                ${status === 'novos' ? 'Preparar' : status === 'preparo' ? 'Finalizar' : 'Despachar'}
                            </button>
                        </div>
                    </div>
                `).join('');
                
                if (coluna) coluna.innerHTML = pedidosHTML;
                if (colunaMobile) colunaMobile.innerHTML = pedidosMobileHTML;
            });
        }

        // Atualização dinâmica dos pedidos do Balcão
        function atualizarPainelBalcao() {
            const container = document.getElementById('pedidos-balcao');
            const contador = document.getElementById('contador-balcao');
            
            // Atualizar contador
            contador.textContent = `${pedidosBalcaoData.length} ${pedidosBalcaoData.length === 1 ? 'pedido' : 'pedidos'}`;
            
            if (pedidosBalcaoData.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-400">
                        <i class="fas fa-store text-3xl mb-3"></i>
                        <p class="text-sm">Nenhum pedido no balcão</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = pedidosBalcaoData.map(pedido => {
                return `
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-3 md:p-4 hover:bg-gray-100 transition-colors cursor-pointer" onclick="openPedidoBalcaoModal('${pedido.id}')">
                        <!-- Mobile Layout -->
                        <div class="block md:hidden">
                            <div class="flex justify-between items-start mb-2">
                                <div class="flex items-center space-x-2">
                                    <span class="text-base font-semibold text-gray-900">#${pedido.id}</span>
                                    <span class="text-xs px-2 py-1 rounded-full ${pedido.tipo === 'retirada' ? 'bg-blue-100 text-blue-700' : 'bg-purple-100 text-purple-700'}">
                                        ${pedido.tipo === 'retirada' ? 'Retirada' : 'Local'}
                                    </span>
                                </div>
                                <div class="text-right">
                                    <div class="text-xs text-gray-500">${pedido.hora}</div>
                                    <div class="text-xs text-green-600 font-medium">Aguardando ${pedido.tempoEspera}</div>
                                </div>
                            </div>
                            
                            <div class="mb-2">
                                <span class="text-xs px-2 py-1 rounded-full bg-green-100 text-green-700">
                                    <i class="fas fa-check-circle mr-1"></i>Pronto
                                </span>
                            </div>
                            
                            <div class="mb-3">
                                <p class="text-sm font-medium text-gray-900">${pedido.cliente}</p>
                                <p class="text-xs text-gray-600 mt-1">${pedido.itens.join(', ')}</p>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <span class="text-base font-bold text-gray-900">R$ ${pedido.total.toFixed(2)}</span>
                                ${pedido.tipo === 'retirada' ? 
                                    `<button onclick="event.stopPropagation(); entregarPedidoBalcao('${pedido.id}')" class="bg-orange-500 text-white px-3 py-2 rounded-lg text-xs font-medium hover:bg-orange-600 transition-colors">
                                        <i class="fas fa-hand-holding mr-1"></i>Entregar
                                    </button>` :
                                    `<button onclick="event.stopPropagation(); vincularPedidoBalcao('${pedido.id}')" class="bg-purple-500 text-white px-3 py-2 rounded-lg text-xs font-medium hover:bg-purple-600 transition-colors">
                                        <i class="fas fa-link mr-1"></i>Vincular
                                    </button>`
                                }
                            </div>
                        </div>
                        
                        <!-- Desktop Layout -->
                        <div class="hidden md:block">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex items-center space-x-3">
                                    <span class="text-lg font-semibold text-gray-900">#${pedido.id}</span>
                                    <span class="text-xs px-2 py-1 rounded-full ${pedido.tipo === 'retirada' ? 'bg-blue-100 text-blue-700' : 'bg-purple-100 text-purple-700'}">
                                        ${pedido.tipo === 'retirada' ? 'Retirada' : 'Local'}
                                    </span>
                                    <span class="text-xs px-2 py-1 rounded-full bg-green-100 text-green-700">
                                        <i class="fas fa-check-circle mr-1"></i>Pronto
                                    </span>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm text-gray-500">${pedido.hora}</div>
                                    <div class="text-sm text-green-600 font-medium">Aguardando ${pedido.tempoEspera}</div>
                                </div>
                            </div>
                            
                            <div class="flex justify-between items-center mb-3">
                                <div>
                                    <p class="text-sm font-medium text-gray-900">${pedido.cliente}</p>
                                    <p class="text-xs text-gray-600">${pedido.itens.join(', ')}</p>
                                </div>
                                <span class="text-lg font-bold text-gray-900">R$ ${pedido.total.toFixed(2)}</span>
                            </div>
                            
                            <div class="flex justify-end">
                                ${pedido.tipo === 'retirada' ? 
                                    `<button onclick="event.stopPropagation(); entregarPedidoBalcao('${pedido.id}')" class="bg-orange-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors">
                                        <i class="fas fa-hand-holding mr-1"></i>Entregar
                                    </button>` :
                                    `<button onclick="event.stopPropagation(); vincularPedidoBalcao('${pedido.id}')" class="bg-purple-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-600 transition-colors">
                                        <i class="fas fa-link mr-1"></i>Vincular
                                    </button>`
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Controle da visualização do Salão
        function switchSalaoView(view) {
            document.querySelectorAll('.salao-view-toggle').forEach(btn => {
                btn.classList.remove('bg-white', 'text-gray-900', 'shadow-sm');
                btn.classList.add('text-gray-500');
            });
            
            // Update both mobile and desktop toggles
            const mobileToggle = document.getElementById(`view-${view}`);
            const desktopToggle = document.getElementById(`view-${view}-desktop`);
            
            if (mobileToggle) {
                mobileToggle.classList.add('bg-white', 'text-gray-900', 'shadow-sm');
                mobileToggle.classList.remove('text-gray-500');
            }
            
            if (desktopToggle) {
                desktopToggle.classList.add('bg-white', 'text-gray-900', 'shadow-sm');
                desktopToggle.classList.remove('text-gray-500');
            }
            
            document.querySelectorAll('.salao-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            
            document.getElementById(`${view}-panel`).classList.remove('hidden');
        }

        // Atualização dinâmica das mesas
        function atualizarPainelMesas() {
            const mesasContainer = document.getElementById('mesas-grid');
            
            mesasContainer.innerHTML = Object.keys(mesasData).map(numero => {
                const mesa = mesasData[numero];
                const statusColors = {
                    livre: { bg: 'green', icon: 'chair' },
                    ocupada: { bg: 'red', icon: 'users' },
                    reservada: { bg: 'amber', icon: 'clock' }
                };
                const color = statusColors[mesa.status];
                
                return `
                    <div onclick="openMesaModal(${numero}, '${mesa.status}')" class="bg-white border-2 border-${color.bg}-200 rounded-lg p-4 cursor-pointer hover:bg-${color.bg}-50 hover:border-${color.bg}-300 transition-all duration-200 hover-lift">
                        <div class="text-center">
                            <div class="w-12 h-12 bg-${color.bg}-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                                <i class="fas fa-${color.icon} text-${color.bg}-600"></i>
                            </div>
                            <div class="text-sm font-semibold text-gray-900 mb-1">Mesa ${numero.toString().padStart(2, '0')}</div>
                            <div class="text-xs text-gray-500 mb-1">${mesa.status === 'ocupada' ? `${mesa.pessoas} pessoas` : mesa.status === 'reservada' ? `${mesa.pessoas} pessoas` : `${mesa.lugares} lugares`}</div>
                            ${mesa.tempo ? `<div class="text-xs text-${color.bg}-600 font-medium mb-2">${mesa.tempo || mesa.horario}</div>` : '<div class="mb-2"></div>'}
                            <span class="inline-flex px-2 py-1 text-xs font-medium rounded bg-${color.bg}-100 text-${color.bg}-700">${mesa.status.charAt(0).toUpperCase() + mesa.status.slice(1)}</span>
                        </div>
                    </div>
                `;
            }).join('');

            // Atualizar contadores
            const livres = Object.values(mesasData).filter(m => m.status === 'livre').length;
            const ocupadas = Object.values(mesasData).filter(m => m.status === 'ocupada').length;
            const reservadas = Object.values(mesasData).filter(m => m.status === 'reservada').length;
            
            const mesasPanel = document.getElementById('mesas-panel');
            if (mesasPanel) {
                const contadores = mesasPanel.querySelectorAll('.flex.items-center.space-x-6 > div span');
                if (contadores.length >= 3) {
                    contadores[0].textContent = livres;
                    contadores[1].textContent = ocupadas;
                    contadores[2].textContent = reservadas;
                }
            }
        }

        // Atualização dinâmica das comandas
        function atualizarPainelComandas() {
            const comandasContainer = document.getElementById('comandas-grid');
            const comandasAtivas = Object.keys(comandasData).filter(id => comandasData[id].status === 'ativa' || comandasData[id].status === 'pendente');
            
            if (comandasContainer) {
                comandasContainer.innerHTML = comandasAtivas.map(id => {
                    const comanda = comandasData[id];
                    const color = comanda.status === 'ativa' ? 'blue' : 'amber';
                    
                    return `
                        <div onclick="openComandaAvulsaModal('${id}', '${comanda.status}')" class="bg-white border border-${color}-200 rounded-lg p-4 cursor-pointer hover:bg-${color}-50 hover:border-${color}-300 transition-all duration-200 hover-lift">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-${color}-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-${comanda.status === 'ativa' ? 'receipt' : 'clock'} text-${color}-600"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm font-semibold text-gray-900">#${id}</div>
                                        <div class="text-xs text-gray-500">${comanda.cliente}</div>
                                    </div>
                                </div>
                                <span class="inline-flex px-2 py-1 text-xs font-medium rounded bg-${color}-100 text-${color}-700">${comanda.status === 'ativa' ? 'Ativa' : 'Pendente'}</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="text-right">
                                    <div class="text-lg font-bold text-gray-900">R$ ${comanda.total.toFixed(2)}</div>
                                    <div class="text-xs text-${color}-600 font-medium">${comanda.tempo}</div>
                                </div>
                                <div class="text-xs text-gray-500">${comanda.itens} ${comanda.itens === 1 ? 'item' : 'itens'}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }
        }

        // Modal da Mesa
        function openMesaModal(numero, status) {
            const modal = document.getElementById('mesa-modal');
            const mesaNumber = document.getElementById('mesa-number');
            const mesaStatus = document.getElementById('mesa-status');
            const mesaContent = document.getElementById('mesa-content');
            
            mesaNumber.textContent = numero;
            mesaStatus.textContent = status.charAt(0).toUpperCase() + status.slice(1);
            
            mesaStatus.className = 'text-sm font-semibold px-3 py-1 rounded-full';
            if (status === 'livre') {
                mesaStatus.classList.add('bg-green-100', 'text-green-700');
                mesaContent.innerHTML = `
                    <div class="space-y-4">
                        <div class="bg-green-50 rounded-lg p-3 text-center">
                            <div class="text-sm text-green-700">Esta mesa está livre e pronta para uso</div>
                        </div>
                        <div class="border-t pt-4">
                            <div class="flex space-x-3">
                                <button onclick="reservarMesa(${numero})" class="w-24 border border-gray-300 text-gray-700 py-2 px-3 rounded text-sm font-medium hover:bg-gray-50 transition-colors">
                                    Reservar
                                </button>
                                <button onclick="ocuparMesa(${numero})" class="flex-1 bg-green-500 text-white py-2 px-4 rounded font-medium hover:bg-green-600 transition-colors">
                                    Ocupar Mesa
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            } else if (status === 'ocupada') {
                mesaStatus.classList.add('bg-red-100', 'text-red-700');
                mesaContent.innerHTML = `
                    <div class="space-y-4">
                        <div class="bg-red-50 rounded-lg p-3">
                            <div class="text-sm text-red-700 mb-2">Mesa ocupada há ${numero === 2 ? '45min' : '1h20min'}</div>
                            <div class="text-xs text-gray-600">${numero === 2 ? '4' : '2'} pessoas • Comanda #C00${numero}</div>
                        </div>
                        <div class="border-t pt-4">
                            <div class="flex space-x-3">
                                <button onclick="liberarMesa(${numero})" class="w-20 border border-gray-300 text-gray-700 py-2 px-2 rounded text-xs font-medium hover:bg-gray-50 transition-colors">
                                    Liberar
                                </button>
                                <button onclick="verComanda('C00${numero}')" class="flex-1 bg-amber-500 text-white py-2 px-3 rounded text-xs font-medium hover:bg-amber-600 transition-colors">
                                    Ver Comanda
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            } else if (status === 'reservada') {
                mesaStatus.classList.add('bg-amber-100', 'text-amber-700');
                mesaContent.innerHTML = `
                    <div class="space-y-4">
                        <div class="bg-amber-50 rounded-lg p-3">
                            <div class="text-sm text-amber-700 mb-2">Reservada para 16:00</div>
                            <div class="text-xs text-gray-600">João Silva • 4 pessoas</div>
                        </div>
                        <div class="border-t pt-4">
                            <div class="flex space-x-3">
                                <button onclick="cancelarReserva(${numero})" class="w-24 border border-gray-300 text-gray-700 py-2 px-3 rounded text-sm font-medium hover:bg-gray-50 transition-colors">
                                    Cancelar
                                </button>
                                <button onclick="confirmarChegada(${numero})" class="flex-1 bg-green-500 text-white py-2 px-4 rounded font-medium hover:bg-green-600 transition-colors">
                                    Confirmar Chegada
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            modal.classList.remove('hidden');
        }
        
        function closeMesaModal() {
            document.getElementById('mesa-modal').classList.add('hidden');
        }

        // Funções de ação das mesas
        function ocuparMesa(numero) {
            alert(`Mesa ${numero} ocupada! Abrindo nova comanda...`);
            closeMesaModal();
        }
        
        function liberarMesa(numero) {
            if (confirm(`Tem certeza que deseja liberar a mesa ${numero}?`)) {
                alert(`Mesa ${numero} liberada!`);
                closeMesaModal();
            }
        }
        
        function reservarMesa(numero) {
            alert(`Abrindo formulário de reserva para mesa ${numero}...`);
            closeMesaModal();
        }
        
        function confirmarChegada(numero) {
            alert(`Chegada confirmada! Mesa ${numero} agora está ocupada.`);
            closeMesaModal();
        }
        
        function cancelarReserva(numero) {
            if (confirm(`Tem certeza que deseja cancelar a reserva da mesa ${numero}?`)) {
                alert(`Reserva da mesa ${numero} cancelada!`);
                closeMesaModal();
            }
        }

        function openComandaAvulsaModal(comanda, status) {
            alert(`Abrindo comanda ${comanda} (${status})`);
        }

        function novaComandaAvulsa() {
            alert('Abrindo nova comanda avulsa...');
        }

        function verComanda(comanda) {
            alert(`Abrindo comanda ${comanda}...`);
        }

        // Modal do Pedido do Balcão
        function openPedidoBalcaoModal(numero) {
            const modal = document.getElementById('pedido-modal');
            const pedidoNumber = document.getElementById('pedido-number');
            const pedidoContent = document.getElementById('pedido-content');
            
            pedidoNumber.textContent = `#${numero}`;
            
            const pedidosBalcao = {
                'B001': { 
                    cliente: 'Pedro Santos', 
                    telefone: '(11) 91111-2222', 
                    total: 28.90, 
                    tipo: 'retirada',
                    formaPagamento: 'PIX',
                    observacoes: 'Cliente aguardando no balcão.',
                    itens: [
                        { quantidade: 1, nome: 'Hambúrguer', configuracao: 'Sem cebola', observacao: 'Obs.: Bem passado', preco: 22.90 },
                        { quantidade: 1, nome: 'Refrigerante', configuracao: null, observacao: null, preco: 6.00 }
                    ]
                },
                'B002': { 
                    cliente: 'Ana Silva', 
                    telefone: '(11) 92222-3333', 
                    total: 42.50, 
                    tipo: 'local',
                    formaPagamento: 'Cartão',
                    observacoes: 'Cliente quer sentar próximo à janela.',
                    itens: [
                        { quantidade: 2, nome: 'Pizza Individual', configuracao: 'Margherita e Calabresa', observacao: null, preco: 18.00 },
                        { quantidade: 1, nome: 'Suco', configuracao: 'Laranja', observacao: 'Obs.: Sem açúcar', preco: 6.50 }
                    ]
                },
                'B003': { 
                    cliente: 'Carlos Lima', 
                    telefone: '(11) 93333-4444', 
                    total: 35.00, 
                    tipo: 'retirada',
                    formaPagamento: 'Dinheiro',
                    observacoes: 'Troco para R$ 50,00.',
                    itens: [
                        { quantidade: 1, nome: 'Pizza Margherita', configuracao: 'Borda recheada', observacao: 'Obs.: Extra queijo', preco: 28.00 },
                        { quantidade: 1, nome: 'Batata', configuracao: null, observacao: null, preco: 7.00 }
                    ]
                },
                'B004': { 
                    cliente: 'Maria Costa', 
                    telefone: '(11) 94444-5555', 
                    total: 22.90, 
                    tipo: 'local',
                    formaPagamento: 'PIX',
                    observacoes: 'Cliente prefere mesa no fundo.',
                    itens: [
                        { quantidade: 1, nome: 'Sanduíche', configuracao: 'Natural de frango', observacao: 'Obs.: Sem maionese', preco: 14.90 },
                        { quantidade: 1, nome: 'Suco Natural', configuracao: 'Laranja', observacao: null, preco: 8.00 }
                    ]
                }
            };
            
            const pedido = pedidosBalcao[numero];
            
            // Todos os pedidos do balcão estão prontos, apenas aguardando retirada/vinculação
            const botoes = pedido.tipo === 'retirada' ? 
                `<button onclick="entregarPedidoBalcao('${numero}')" class="w-full bg-orange-500 text-white py-2 px-4 rounded font-medium hover:bg-orange-600 transition-colors">
                    <i class="fas fa-hand-holding mr-2"></i>Entregar ao Cliente
                </button>` :
                `<button onclick="vincularPedidoBalcao('${numero}')" class="w-full bg-purple-500 text-white py-2 px-4 rounded font-medium hover:bg-purple-600 transition-colors">
                    <i class="fas fa-link mr-2"></i>Vincular à Mesa/Comanda
                </button>`;
            
            const telefoneFormatado = pedido.telefone.replace(/\D/g, '');
            
            pedidoContent.innerHTML = `
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm font-medium text-gray-900">${pedido.cliente}</span>
                            <span class="text-gray-400">•</span>
                            <button onclick="window.open('https://wa.me/55${telefoneFormatado}', '_blank')" class="text-sm text-green-600 hover:text-green-800 transition-colors">
                                ${pedido.telefone}
                            </button>
                        </div>
                        <span class="text-xs px-2 py-1 rounded-full ${pedido.tipo === 'retirada' ? 'bg-blue-100 text-blue-700' : 'bg-purple-100 text-purple-700'}">
                            ${pedido.tipo === 'retirada' ? 'Para Retirada' : 'Consumo Local'}
                        </span>
                    </div>
                    
                    <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-check-circle text-green-600"></i>
                            <span class="text-sm font-medium text-green-800">Pedido Pronto</span>
                        </div>
                        <p class="text-xs text-green-700 mt-1">Este pedido foi preparado pela cozinha e está aguardando ${pedido.tipo === 'retirada' ? 'retirada pelo cliente' : 'vinculação à mesa ou comanda'}.</p>
                    </div>
                    
                    <div class="border-t pt-4">
                        <div class="space-y-3">
                            ${pedido.itens.map(item => `
                                <div class="flex justify-between items-start">
                                    <div class="flex-1">
                                        <div class="text-sm text-gray-900">${item.quantidade} • ${item.nome}</div>
                                        ${item.configuracao ? `<div class="text-xs text-gray-500 mt-1">${item.configuracao}</div>` : ''}
                                        ${item.observacao ? `<div class="text-xs text-gray-500 mt-1">${item.observacao}</div>` : ''}
                                    </div>
                                    <div class="text-sm font-medium text-gray-900 ml-3">
                                        R$ ${(item.preco * item.quantidade).toFixed(2)}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="border-t pt-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-medium text-gray-900">Total</span>
                            <span class="text-sm font-bold text-orange-500">R$ ${pedido.total.toFixed(2)}</span>
                        </div>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm text-gray-600">Forma de Pagamento</span>
                            <span class="text-xs font-medium text-gray-700">
                                ${pedido.formaPagamento}
                            </span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">Status do Pagamento</span>
                            <span class="text-xs font-medium px-2 py-1 rounded bg-green-100 text-green-700">
                                Confirmado
                            </span>
                        </div>
                    </div>
                    
                    ${pedido.observacoes ? `
                        <div class="border-t pt-4">
                            <div>
                                <span class="text-sm font-medium text-gray-900 block mb-1">Observações do Pedido</span>
                                <div class="text-sm text-gray-700">
                                    ${pedido.observacoes}
                                </div>
                            </div>
                        </div>
                    ` : ''}
                    
                    <div class="border-t pt-4">
                        <div class="flex space-x-3">
                            ${botoes}
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function closePedidoBalcaoModal() {
            document.getElementById('pedido-modal').classList.add('hidden');
        }

        // Modal do Pedido
        function openPedidoModal(numero, status) {
            const modal = document.getElementById('pedido-modal');
            const pedidoNumber = document.getElementById('pedido-number');
            const pedidoContent = document.getElementById('pedido-content');
            
            pedidoNumber.textContent = `#${numero}`;
            
            const pedidos = {
                '001': { 
                    cliente: 'João Silva', 
                    telefone: '(11) 99999-1234', 
                    total: 45.90, 
                    endereco: 'Rua das Flores, 123 - Centro, São Paulo - SP',
                    formaPagamento: 'PIX automático',
                    observacoes: 'Entregar no portão azul. Tocar campainha 2 vezes.',
                    itens: [
                        { quantidade: 2, nome: 'Hambúrguer', configuracao: 'Sem cebola, extra bacon', observacao: 'Obs.: Bem passado, por favor', preco: 22.90 },
                        { quantidade: 1, nome: 'Batata Frita', configuracao: null, observacao: null, preco: 12.50 }
                    ]
                },
                '002': { 
                    cliente: 'Maria Santos', 
                    telefone: '(11) 98888-5678', 
                    total: 32.00, 
                    endereco: 'Para retirada',
                    formaPagamento: 'Cartão online',
                    observacoes: 'Apartamento 15B. Interfone não funciona, ligar antes.',
                    itens: [
                        { quantidade: 1, nome: 'Pizza Margherita', configuracao: 'Borda recheada', observacao: 'Obs.: Extra queijo, se possível', preco: 32.00 }
                    ]
                },
                '025': { 
                    cliente: 'Roberto Lima', 
                    telefone: '(11) 97777-9012', 
                    total: 18.50, 
                    endereco: 'Para retirada',
                    formaPagamento: 'Dinheiro',
                    observacoes: null,
                    itens: [
                        { quantidade: 1, nome: 'Açaí 500ml', configuracao: 'Com granola e banana', observacao: null, preco: 12.00 },
                        { quantidade: 1, nome: 'Vitamina', configuracao: null, observacao: 'Obs.: Sem açúcar', preco: 6.50 }
                    ]
                },
                '003': { 
                    cliente: 'Carlos Oliveira', 
                    telefone: '(11) 96666-3456', 
                    total: 28.50, 
                    endereco: 'Rua da Liberdade, 321 - Liberdade, São Paulo - SP',
                    formaPagamento: 'Maquininha de cartão',
                    observacoes: 'Casa amarela com portão preto.',
                    itens: [
                        { quantidade: 3, nome: 'Pastel', configuracao: 'Queijo, carne, palmito', observacao: 'Obs.: Bem douradinho', preco: 6.00 },
                        { quantidade: 1, nome: 'Refrigerante', configuracao: null, observacao: null, preco: 4.50 }
                    ]
                },
                '026': { 
                    cliente: 'Fernanda Costa', 
                    telefone: '(11) 95555-7890', 
                    total: 54.00, 
                    endereco: 'Rua Oscar Freire, 654 - Jardins, São Paulo - SP',
                    formaPagamento: 'PIX automático',
                    observacoes: 'Prédio comercial, entrada pela lateral.',
                    itens: [
                        { quantidade: 2, nome: 'Pizza Individual', configuracao: 'Calabresa e Margherita', observacao: null, preco: 22.00 },
                        { quantidade: 2, nome: 'Refrigerante', configuracao: null, observacao: 'Obs.: Bem gelado', preco: 4.50 }
                    ]
                },
                '004': { 
                    cliente: 'Ana Costa', 
                    telefone: '(11) 94444-2468', 
                    total: 35.00, 
                    endereco: 'Para retirada',
                    formaPagamento: 'Cartão online',
                    observacoes: 'Deixar com o porteiro se não estiver.',
                    itens: [
                        { quantidade: 2, nome: 'Açaí', configuracao: 'Com leite condensado', observacao: 'Obs.: Pouco leite condensado', preco: 12.00 },
                        { quantidade: 1, nome: 'Suco Natural', configuracao: 'Laranja', observacao: null, preco: 8.00 }
                    ]
                }
            };
            
            const pedido = pedidos[numero];
            
            let botoes = '';
            if (status === 'novos') {
                botoes = `
                    <button onclick="rejeitarPedido('${numero}')" class="w-20 border border-gray-300 text-gray-700 py-2 px-3 rounded text-sm font-medium hover:bg-gray-50 transition-colors">
                        Voltar
                    </button>
                    <button onclick="aceitarPedido('${numero}')" class="flex-1 bg-blue-500 text-white py-2 px-4 rounded font-medium hover:bg-blue-600 transition-colors">
                        Preparar
                    </button>
                `;
            } else if (status === 'preparo') {
                botoes = `
                    <button onclick="voltarNovos('${numero}')" class="w-20 border border-gray-300 text-gray-700 py-2 px-3 rounded text-sm font-medium hover:bg-gray-50 transition-colors">
                        Voltar
                    </button>
                    <button onclick="finalizarPedido('${numero}')" class="flex-1 bg-green-500 text-white py-2 px-4 rounded font-medium hover:bg-green-600 transition-colors">
                        Finalizar
                    </button>
                `;
            } else {
                botoes = `
                    <button onclick="voltarPreparo('${numero}')" class="w-20 border border-gray-300 text-gray-700 py-2 px-3 rounded text-sm font-medium hover:bg-gray-50 transition-colors">
                        Voltar
                    </button>
                    <button onclick="entregarPedido('${numero}')" class="flex-1 bg-orange-500 text-white py-2 px-4 rounded font-medium hover:bg-orange-600 transition-colors">
                        Despachar
                    </button>
                `;
            }
            
            const telefoneFormatado = pedido.telefone.replace(/\D/g, '');
            
            pedidoContent.innerHTML = `
                <div class="space-y-4">
                    <div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm font-medium text-gray-900">${pedido.cliente}</span>
                            <span class="text-gray-400">•</span>
                            <button onclick="window.open('https://wa.me/55${telefoneFormatado}', '_blank')" class="text-sm text-green-600 hover:text-green-800 transition-colors">
                                ${pedido.telefone}
                            </button>
                        </div>
                    </div>
                    
                    <div class="border-t pt-4">
                        <div class="space-y-3">
                            ${pedido.itens.map(item => `
                                <div class="flex justify-between items-start">
                                    <div class="flex-1">
                                        <div class="text-sm text-gray-900">${item.quantidade} • ${item.nome}</div>
                                        ${item.configuracao ? `<div class="text-xs text-gray-500 mt-1">${item.configuracao}</div>` : ''}
                                        ${item.observacao ? `<div class="text-xs text-gray-500 mt-1">${item.observacao}</div>` : ''}
                                    </div>
                                    <div class="text-sm font-medium text-gray-900 ml-3">
                                        R$ ${(item.preco * item.quantidade).toFixed(2)}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="border-t pt-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-medium text-gray-900">Total</span>
                            <span class="text-sm font-bold text-orange-500">R$ ${pedido.total.toFixed(2)}</span>
                        </div>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm text-gray-600">Forma de Pagamento</span>
                            <span class="text-xs font-medium text-gray-700">
                                ${pedido.formaPagamento}
                            </span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">Status do Pagamento</span>
                            <span class="text-xs font-medium px-2 py-1 rounded ${Math.random() > 0.5 ? 'bg-green-100 text-green-700' : 'bg-amber-100 text-amber-700'}">
                                ${Math.random() > 0.5 ? 'Confirmado' : 'Pendente'}
                            </span>
                        </div>
                    </div>
                    
                    <div class="border-t pt-4">
                        <div class="space-y-2">
                            <div>
                                <span class="text-sm font-medium text-gray-900 block mb-1">${pedido.endereco === 'Para retirada' ? 'Tipo de Pedido' : 'Endereço de Entrega'}</span>
                                ${pedido.endereco === 'Para retirada' ? 
                                    `<div class="text-sm text-orange-600 font-medium">
                                        <i class="fas fa-store mr-1"></i>Para retirada
                                    </div>` :
                                    `<button onclick="window.open('https://maps.google.com/?q=${encodeURIComponent(pedido.endereco)}', '_blank')" class="text-sm text-blue-600 hover:text-blue-800 transition-colors text-left">
                                        <i class="fas fa-map-marker-alt mr-1"></i>${pedido.endereco}
                                    </button>`
                                }
                            </div>
                            ${pedido.observacoes ? `
                                <div>
                                    <span class="text-sm font-medium text-gray-900 block mb-1">Observações do Pedido</span>
                                    <div class="text-sm text-gray-700">
                                        ${pedido.observacoes}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                    
                    <div class="border-t pt-4">
                        <div class="flex space-x-3">
                            ${botoes}
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }
        
        function closePedidoModal() {
            document.getElementById('pedido-modal').classList.add('hidden');
        }

        // Funções de ação dos pedidos
        function aceitarPedido(numero) {
            const pedido = pedidosData.novos.find(p => p.id === numero);
            if (pedido) {
                pedidosData.novos = pedidosData.novos.filter(p => p.id !== numero);
                pedidosData.preparo.push(pedido);
                atualizarPainelKDS();
                showNotification(`Pedido #${numero} aceito e enviado para preparo!`, 'success');
            }
            closePedidoModal();
        }

        // Funções de ação dos pedidos do balcão
        function entregarPedidoBalcao(numero) {
            const index = pedidosBalcaoData.findIndex(p => p.id === numero);
            if (index !== -1) {
                pedidosBalcaoData.splice(index, 1);
                atualizarPainelBalcao();
                showNotification(`Pedido #${numero} entregue ao cliente!`, 'success');
                closePedidoBalcaoModal();
            }
        }

        function vincularPedidoBalcao(numero) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-lg shadow-xl w-full max-w-md">
                    <div class="flex items-center justify-between p-4 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">Vincular Pedido #${numero}</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="p-4">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Vincular a:</label>
                                <div class="space-y-2">
                                    <div class="flex bg-gray-100 rounded-lg p-1">
                                        <button onclick="setVinculoTipo('mesa')" id="vinculo-mesa" class="vinculo-toggle flex-1 px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 bg-white text-gray-900 shadow-sm">
                                            <i class="fas fa-chair mr-1"></i>Mesa
                                        </button>
                                        <button onclick="setVinculoTipo('comanda')" id="vinculo-comanda" class="vinculo-toggle flex-1 px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 text-gray-500 hover:text-gray-700">
                                            <i class="fas fa-receipt mr-1"></i>Comanda
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="vinculo-opcoes">
                                <select id="select-vinculo" class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                    <option value="">Selecione uma mesa...</option>
                                    ${Object.keys(mesasData).filter(n => mesasData[n].status === 'livre').map(n => 
                                        `<option value="mesa-${n}">Mesa ${n.toString().padStart(2, '0')}</option>`
                                    ).join('')}
                                </select>
                            </div>
                            
                            <div class="flex space-x-3">
                                <button onclick="this.closest('.fixed').remove()" class="w-20 border border-gray-300 text-gray-700 py-2 px-3 rounded text-sm font-medium hover:bg-gray-50 transition-colors">
                                    Cancelar
                                </button>
                                <button onclick="confirmarVinculo('${numero}'); this.closest('.fixed').remove();" class="flex-1 bg-purple-500 text-white py-2 px-4 rounded font-medium hover:bg-purple-600 transition-colors">
                                    Vincular
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Adicionar event listeners para o modal de vínculo
            window.setVinculoTipo = function(tipo) {
                document.querySelectorAll('.vinculo-toggle').forEach(btn => {
                    btn.classList.remove('bg-white', 'text-gray-900', 'shadow-sm');
                    btn.classList.add('text-gray-500');
                });
                
                document.getElementById(`vinculo-${tipo}`).classList.add('bg-white', 'text-gray-900', 'shadow-sm');
                
                const selectVinculo = document.getElementById('select-vinculo');
                selectVinculo.innerHTML = '<option value="">Selecione...</option>';
                
                if (tipo === 'mesa') {
                    Object.keys(mesasData).filter(n => mesasData[n].status === 'livre').forEach(n => {
                        selectVinculo.innerHTML += `<option value="mesa-${n}">Mesa ${n.toString().padStart(2, '0')}</option>`;
                    });
                } else if (tipo === 'comanda') {
                    Object.keys(comandasData).filter(id => comandasData[id].status === 'ativa').forEach(id => {
                        selectVinculo.innerHTML += `<option value="${id}">Comanda ${id}</option>`;
                    });
                }
            };
            
            window.confirmarVinculo = function(pedidoId) {
                const selectVinculo = document.getElementById('select-vinculo');
                const vinculo = selectVinculo.value;
                
                if (!vinculo) {
                    alert('Por favor, selecione onde vincular o pedido.');
                    return;
                }
                
                // Remover pedido do balcão
                const index = pedidosBalcaoData.findIndex(p => p.id === pedidoId);
                if (index !== -1) {
                    pedidosBalcaoData.splice(index, 1);
                    atualizarPainelBalcao();
                }
                
                if (vinculo.startsWith('mesa-')) {
                    const mesaNum = vinculo.replace('mesa-', '');
                    showNotification(`Pedido #${pedidoId} vinculado à Mesa ${mesaNum}!`, 'success');
                } else {
                    showNotification(`Pedido #${pedidoId} vinculado à Comanda ${vinculo}!`, 'success');
                }
                
                closePedidoBalcaoModal();
            };
        }
        
        function rejeitarPedido(numero) {
            if (confirm(`Tem certeza que deseja rejeitar o pedido #${numero}?`)) {
                pedidosData.novos = pedidosData.novos.filter(p => p.id !== numero);
                atualizarPainelKDS();
                showNotification(`Pedido #${numero} rejeitado!`, 'error');
                closePedidoModal();
            }
        }
        
        function finalizarPedido(numero) {
            const pedido = pedidosData.preparo.find(p => p.id === numero);
            if (pedido) {
                pedidosData.preparo = pedidosData.preparo.filter(p => p.id !== numero);
                pedidosData.prontos.push(pedido);
                atualizarPainelKDS();
                showNotification(`Pedido #${numero} marcado como pronto!`, 'success');
            }
            closePedidoModal();
        }
        
        function entregarPedido(numero) {
            pedidosData.prontos = pedidosData.prontos.filter(p => p.id !== numero);
            atualizarPainelKDS();
            showNotification(`Pedido #${numero} finalizado e entregue!`, 'success');
            closePedidoModal();
        }
        
        function cancelarPedido(numero) {
            if (confirm(`Tem certeza que deseja cancelar o pedido #${numero}?`)) {
                pedidosData.preparo = pedidosData.preparo.filter(p => p.id !== numero);
                atualizarPainelKDS();
                showNotification(`Pedido #${numero} cancelado!`, 'error');
                closePedidoModal();
            }
        }
        
        function voltarPreparo(numero) {
            const pedido = pedidosData.prontos.find(p => p.id === numero);
            if (pedido) {
                pedidosData.prontos = pedidosData.prontos.filter(p => p.id !== numero);
                pedidosData.preparo.push(pedido);
                atualizarPainelKDS();
                showNotification(`Pedido #${numero} voltou para preparo!`, 'warning');
            }
            closePedidoModal();
        }
        
        function voltarNovos(numero) {
            const pedido = pedidosData.preparo.find(p => p.id === numero);
            if (pedido) {
                pedidosData.preparo = pedidosData.preparo.filter(p => p.id !== numero);
                pedidosData.novos.push(pedido);
                atualizarPainelKDS();
                showNotification(`Pedido #${numero} voltou para novos!`, 'warning');
            }
            closePedidoModal();
        }

        // Funções de ação das mesas
        function ocuparMesa(numero) {
            mesasData[numero].status = 'ocupada';
            mesasData[numero].pessoas = 2;
            mesasData[numero].tempo = '1min';
            mesasData[numero].comanda = `C${(Math.random() * 1000).toFixed(0).padStart(3, '0')}`;
            atualizarPainelMesas();
            showNotification(`Mesa ${numero} ocupada! Nova comanda criada.`, 'success');
            closeMesaModal();
        }
        
        function liberarMesa(numero) {
            if (confirm(`Tem certeza que deseja liberar a mesa ${numero}?`)) {
                mesasData[numero] = { status: 'livre', lugares: mesasData[numero].lugares };
                atualizarPainelMesas();
                showNotification(`Mesa ${numero} liberada!`, 'success');
                closeMesaModal();
            }
        }
        
        function reservarMesa(numero) {
            mesasData[numero].status = 'reservada';
            mesasData[numero].cliente = 'Cliente Reserva';
            mesasData[numero].pessoas = 2;
            mesasData[numero].horario = '18:00';
            atualizarPainelMesas();
            showNotification(`Mesa ${numero} reservada!`, 'success');
            closeMesaModal();
        }
        
        function confirmarChegada(numero) {
            mesasData[numero].status = 'ocupada';
            mesasData[numero].tempo = '1min';
            mesasData[numero].comanda = `C${(Math.random() * 1000).toFixed(0).padStart(3, '0')}`;
            delete mesasData[numero].horario;
            atualizarPainelMesas();
            showNotification(`Chegada confirmada! Mesa ${numero} agora está ocupada.`, 'success');
            closeMesaModal();
        }
        
        function cancelarReserva(numero) {
            if (confirm(`Tem certeza que deseja cancelar a reserva da mesa ${numero}?`)) {
                mesasData[numero] = { status: 'livre', lugares: mesasData[numero].lugares };
                atualizarPainelMesas();
                showNotification(`Reserva da mesa ${numero} cancelada!`, 'warning');
                closeMesaModal();
            }
        }

        // Sistema de notificações
        function showNotification(message, type = 'info') {
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-amber-500',
                info: 'bg-blue-500'
            };
            
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300`;
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : type === 'warning' ? 'exclamation' : 'info'}-circle"></i>
                    <span class="text-sm font-medium">${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Variáveis globais do PDV
        let cart = [];
        let destinoVenda = 'balcao';
        let formaPagamento = null;

        // Base de dados dos produtos
        const produtos = [
            { id: 'hamburguer', nome: 'Hambúrguer Artesanal', categoria: 'lanches', preco: 22.90, icone: 'hamburger' },
            { id: 'pizza', nome: 'Pizza Margherita', categoria: 'lanches', preco: 28.00, icone: 'pizza-slice' },
            { id: 'sanduiche', nome: 'Sanduíche Natural', categoria: 'lanches', preco: 12.90, icone: 'bread-slice' },
            { id: 'cerveja', nome: 'Cerveja', categoria: 'bebidas', preco: 6.00, icone: 'beer' },
            { id: 'refrigerante', nome: 'Refrigerante', categoria: 'bebidas', preco: 4.50, icone: 'glass-whiskey' },
            { id: 'suco', nome: 'Suco Natural', categoria: 'bebidas', preco: 8.00, icone: 'glass-water' },
            { id: 'batata', nome: 'Batata Frita', categoria: 'porcoes', preco: 12.50, icone: 'french-fries' },
            { id: 'frango', nome: 'Porção de Frango', categoria: 'porcoes', preco: 18.90, icone: 'drumstick-bite' },
            { id: 'pudim', nome: 'Pudim de Leite', categoria: 'sobremesas', preco: 8.90, icone: 'birthday-cake' },
            { id: 'sorvete', nome: 'Sorvete', categoria: 'sobremesas', preco: 6.50, icone: 'ice-cream' }
        ];

        // Funções do PDV
        function openPDVModal() {
            document.getElementById('pdv-modal').classList.remove('hidden');
            renderProdutos();
            resetPDV();
        }
        
        function closePDVModal() {
            document.getElementById('pdv-modal').classList.add('hidden');
        }
        
        function resetPDV() {
            cart = [];
            destinoVenda = 'balcao';
            formaPagamento = null;
            updateCartDisplay();
            setDestinoVenda('balcao');
            resetFormaPagamento();
        }
        
        function renderProdutos() {
            const grid = document.getElementById('produtos-grid');
            grid.innerHTML = produtos.map(produto => `
                <div onclick="addProdutoToCart('${produto.id}', '${produto.nome}', ${produto.preco})" class="produto-item bg-white border border-gray-200 rounded-lg p-4 cursor-pointer hover:border-gray-300 hover:shadow-sm transition-all duration-200" data-categoria="${produto.categoria}">
                    <div class="text-center">
                        <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-${produto.icone} text-gray-600 text-lg"></i>
                        </div>
                        <h4 class="text-sm font-medium text-gray-900 mb-1">${produto.nome}</h4>
                        <div class="text-sm font-semibold text-gray-900">R$ ${produto.preco.toFixed(2)}</div>
                    </div>
                </div>
            `).join('');
        }
        
        function filterCategory(categoria) {
            document.querySelectorAll('.category-filter').forEach(btn => {
                btn.classList.remove('active', 'bg-orange-100', 'text-orange-700');
                btn.classList.add('text-gray-600');
            });
            
            event.target.classList.add('active', 'bg-orange-100', 'text-orange-700');
            
            document.querySelectorAll('.produto-item').forEach(item => {
                const itemCategoria = item.getAttribute('data-categoria');
                item.style.display = (categoria === 'todos' || itemCategoria === categoria) ? 'block' : 'none';
            });
        }
        
        function setDestinoVenda(destino) {
            destinoVenda = destino;
            
            document.querySelectorAll('.destino-toggle').forEach(btn => {
                btn.classList.remove('bg-white', 'text-gray-900', 'shadow-sm');
                btn.classList.add('text-gray-500');
            });
            
            document.getElementById(`destino-${destino}`).classList.add('bg-white', 'text-gray-900', 'shadow-sm');
            
            const destinoEspecifico = document.getElementById('destino-especifico');
            const selectDestino = document.getElementById('select-destino');
            
            if (destino === 'balcao') {
                destinoEspecifico.classList.add('hidden');
            } else {
                destinoEspecifico.classList.remove('hidden');
                selectDestino.innerHTML = '<option value="">Selecione...</option>';
                
                if (destino === 'mesa') {
                    for (let i = 1; i <= 8; i++) {
                        selectDestino.innerHTML += `<option value="mesa-${i}">Mesa ${i.toString().padStart(2, '0')}</option>`;
                    }
                } else if (destino === 'comanda') {
                    ['C001', 'C002', 'C004'].forEach(comanda => {
                        selectDestino.innerHTML += `<option value="${comanda}">Comanda ${comanda}</option>`;
                    });
                } else if (destino === 'delivery') {
                    selectDestino.innerHTML += '<option value="novo-delivery">Novo Pedido Delivery</option>';
                }
            }
            
            updateFinalizarButton();
        }
        
        function addProdutoToCart(id, nome, preco) {
            const existingItem = cart.find(item => item.id === id);
            
            if (existingItem) {
                existingItem.quantidade++;
            } else {
                cart.push({ id, nome, preco, quantidade: 1 });
            }
            
            updateCartDisplay();
            updateFinalizarButton();
        }
        
        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartDisplay();
            updateFinalizarButton();
        }
        
        function updateQuantity(id, delta) {
            const item = cart.find(item => item.id === id);
            if (item) {
                item.quantidade += delta;
                if (item.quantidade <= 0) {
                    removeFromCart(id);
                } else {
                    updateCartDisplay();
                    updateFinalizarButton();
                }
            }
        }
        
        function clearCart() {
            if (cart.length > 0 && confirm('Tem certeza que deseja limpar o carrinho?')) {
                cart = [];
                updateCartDisplay();
                updateFinalizarButton();
            }
        }
        
        function updateCartDisplay() {
            const cartItems = document.getElementById('cart-items');
            const cartSubtotal = document.getElementById('cart-subtotal');
            const cartTaxa = document.getElementById('cart-taxa');
            const cartTotal = document.getElementById('cart-total');
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="text-center py-8 text-gray-400">
                        <i class="fas fa-shopping-cart text-2xl mb-2"></i>
                        <p class="text-sm">Nenhum item selecionado</p>
                    </div>
                `;
                cartSubtotal.textContent = 'R$ 0,00';
                cartTaxa.textContent = 'R$ 0,00';
                cartTotal.textContent = 'R$ 0,00';
                return;
            }
            
            let subtotal = 0;
            let itemsHtml = '';
            
            cart.forEach(item => {
                const itemTotal = item.preco * item.quantidade;
                subtotal += itemTotal;
                
                itemsHtml += `
                    <div class="bg-white border border-gray-200 rounded-lg p-3">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex-1">
                                <h5 class="text-sm font-medium text-gray-900">${item.nome}</h5>
                                <p class="text-xs text-gray-500">R$ ${item.preco.toFixed(2)} cada</p>
                            </div>
                            <button onclick="removeFromCart('${item.id}')" class="text-red-500 hover:text-red-700 p-1">
                                <i class="fas fa-trash text-xs"></i>
                            </button>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-2">
                                <button onclick="updateQuantity('${item.id}', -1)" class="w-6 h-6 bg-gray-100 rounded text-xs hover:bg-gray-200 transition-colors">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <span class="text-sm font-medium w-8 text-center">${item.quantidade}</span>
                                <button onclick="updateQuantity('${item.id}', 1)" class="w-6 h-6 bg-gray-100 rounded text-xs hover:bg-gray-200 transition-colors">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <span class="text-sm font-bold text-gray-900">R$ ${itemTotal.toFixed(2)}</span>
                        </div>
                    </div>
                `;
            });
            
            const taxa = subtotal * 0.1;
            const total = subtotal + taxa;
            
            cartItems.innerHTML = itemsHtml;
            cartSubtotal.textContent = `R$ ${subtotal.toFixed(2)}`;
            cartTaxa.textContent = `R$ ${taxa.toFixed(2)}`;
            cartTotal.textContent = `R$ ${total.toFixed(2)}`;
        }
        
        function updateFinalizarButton() {
            const btnFinalizar = document.getElementById('btn-finalizar-venda');
            const selectDestino = document.getElementById('select-destino');
            
            const hasItems = cart.length > 0;
            const hasDestino = destinoVenda === 'balcao' || selectDestino.value !== '';
            const hasPagamento = formaPagamento !== null;
            
            btnFinalizar.disabled = !(hasItems && hasDestino && hasPagamento);
        }
        
        function setFormaPagamento(forma) {
            formaPagamento = forma;
            
            document.querySelectorAll('.pagamento-toggle').forEach(btn => {
                btn.classList.remove('bg-green-100', 'text-green-700', 'border-green-300');
                btn.classList.add('border-gray-300', 'text-gray-700');
            });
            
            document.getElementById(`pagamento-${forma}`).classList.add('bg-green-100', 'text-green-700', 'border-green-300');
            
            updateFinalizarButton();
        }
        
        function resetFormaPagamento() {
            formaPagamento = null;
            document.querySelectorAll('.pagamento-toggle').forEach(btn => {
                btn.classList.remove('bg-green-100', 'text-green-700', 'border-green-300');
                btn.classList.add('border-gray-300', 'text-gray-700');
            });
        }
        
        function finalizarVenda() {
            if (cart.length === 0 || !formaPagamento) return;
            
            const subtotal = cart.reduce((sum, item) => sum + (item.preco * item.quantidade), 0);
            const total = subtotal * 1.1;
            
            alert(`✅ Venda finalizada com sucesso!\n💰 Total: R$ ${total.toFixed(2)}`);
            closePDVModal();
        }
        
        // Funções de comandas
        function openComandaAvulsaModal(comanda, status) {
            const comandaData = comandasData[comanda];
            if (!comandaData) return;
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-lg shadow-xl w-full max-w-md">
                    <div class="flex items-center justify-between p-4 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">Comanda ${comanda}</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="p-4">
                        <div class="space-y-4">
                            <div>
                                <h4 class="text-sm font-medium text-gray-900">${comandaData.cliente}</h4>
                                <p class="text-sm text-gray-500">Tempo: ${comandaData.tempo}</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg p-3">
                                <div class="flex justify-between items-center">
                                    <span class="font-semibold text-gray-900">Total</span>
                                    <span class="font-bold text-gray-900">R$ ${comandaData.total.toFixed(2)}</span>
                                </div>
                            </div>
                            <div class="flex space-x-3">
                                ${status === 'ativa' ? `
                                    <button onclick="fecharComanda('${comanda}'); this.closest('.fixed').remove();" class="flex-1 bg-green-500 text-white py-2 px-4 rounded font-medium hover:bg-green-600 transition-colors">
                                        Fechar Comanda
                                    </button>
                                ` : `
                                    <button onclick="receberPagamento('${comanda}'); this.closest('.fixed').remove();" class="flex-1 bg-blue-500 text-white py-2 px-4 rounded font-medium hover:bg-blue-600 transition-colors">
                                        Receber Pagamento
                                    </button>
                                `}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function novaComandaAvulsa() {
            const novoId = `C${(Math.random() * 1000).toFixed(0).padStart(3, '0')}`;
            comandasData[novoId] = {
                cliente: 'Cliente Avulso',
                total: 0,
                tempo: '0min',
                status: 'ativa',
                itens: 0
            };
            atualizarPainelComandas();
            showNotification(`Nova comanda ${novoId} criada!`, 'success');
        }

        function fecharComanda(comanda) {
            delete comandasData[comanda];
            atualizarPainelComandas();
            showNotification(`Comanda ${comanda} fechada!`, 'success');
        }

        function receberPagamento(comanda) {
            delete comandasData[comanda];
            atualizarPainelComandas();
            showNotification(`Pagamento da comanda ${comanda} recebido!`, 'success');
        }

        function verComanda(comanda) {
            openComandaAvulsaModal(comanda, comandasData[comanda]?.status || 'ativa');
        }

        // Event listeners e inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar painéis dinâmicos
            atualizarPainelKDS();
            atualizarPainelBalcao();
            atualizarPainelMesas();
            atualizarPainelComandas();
            
            // Event listeners do PDV
            const selectDestino = document.getElementById('select-destino');
            if (selectDestino) {
                selectDestino.addEventListener('change', updateFinalizarButton);
            }
            
            // Atualização automática a cada 30 segundos
            setInterval(() => {
                // Simular mudanças nos tempos dos pedidos
                Object.keys(pedidosData).forEach(status => {
                    pedidosData[status].forEach(pedido => {
                        const tempoAtual = parseInt(pedido.tempo);
                        if (!isNaN(tempoAtual)) {
                            pedido.tempo = `${tempoAtual + 1}min`;
                        }
                    });
                });

                // Simular mudanças nos tempos dos pedidos do balcão
                pedidosBalcaoData.forEach(pedido => {
                    const tempoAtual = parseInt(pedido.tempoEspera);
                    if (!isNaN(tempoAtual)) {
                        pedido.tempoEspera = `${tempoAtual + 1}min`;
                    }
                });
                
                // Atualizar tempos das mesas ocupadas
                Object.keys(mesasData).forEach(numero => {
                    const mesa = mesasData[numero];
                    if (mesa.status === 'ocupada' && mesa.tempo) {
                        const match = mesa.tempo.match(/(\d+)min/);
                        if (match) {
                            mesa.tempo = `${parseInt(match[1]) + 1}min`;
                        }
                    }
                });
                
                // Atualizar tempos das comandas
                Object.keys(comandasData).forEach(id => {
                    const comanda = comandasData[id];
                    if (comanda.status === 'ativa' && comanda.tempo !== 'Aguardando') {
                        const match = comanda.tempo.match(/(\d+)min/);
                        if (match) {
                            comanda.tempo = `${parseInt(match[1]) + 1}min`;
                        }
                    }
                });
                
                // Atualizar painéis
                atualizarPainelKDS();
                atualizarPainelBalcao();
                atualizarPainelMesas();
                atualizarPainelComandas();
            }, 30000);
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'980328f9d25164e1',t:'MTc1ODA1NTAyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
